
<div align="left">
#{form @SwitchTemplate.dispatch()}
	#{select 'method', value:session.get("methodSelected"), class:'span3', id:'method', onChange:'javascript:this.form.submit()' }
	 %{
	 	for (menuItem in _mainMenu.getMethods()) {
	 }%
        #{option menuItem.getAction()}${menuItem.getDescription()}#{/option}
    %{
    	}
    }% 
		
	#{/select}
	
	#{select 'year', value:session.get("yearSelected"), class:'span1', id:'year', onChange:'javascript:this.form.submit()'}
		#{option 2011}2011#{/option}
		#{option 2012}2012#{/option}
		#{option 2013}2013#{/option}
		#{option 2014}2014#{/option}
		#{option 2015}2015#{/option}
	#{/select}
	
		
	#{select 'month', value:session.get("monthSelected"), class:'span2', id:'month', onChange:'javascript:this.form.submit()'}
	%{if (_mainMenu.method.name().equals('monthRecap') || _mainMenu.method.name().equals('totalMonthlyAbsences')){
	}%
		#{option 0}Tutti i mesi#{/option}
	%{
		}
	}%	
		#{option 1}Gennaio#{/option}
		#{option 2}Febbraio#{/option}
		#{option 3}Marzo#{/option}
		#{option 4}Aprile#{/option}
		#{option 5}Maggio#{/option}
		#{option 6}Giugno#{/option}
		#{option 7}Luglio#{/option}
		#{option 8}Agosto#{/option}
		#{option 9}Settembre#{/option}
		#{option 10}Ottobre#{/option}
		#{option 11}Novembre#{/option}
		#{option 12}Dicembre#{/option}
	#{/select}
			
	
	#{secure.check "viewPersonList"}
		#{select 'personId', value:session.get("personSelected"), class:'span3', id:'person', onChange:'javascript:this.form.submit()'}
			#{option 0}Scegli una persona#{/option}
		%{
			for(person in _mainMenu.persons){
		}%
			#{option person.id}${person.surname + ' ' + person.name}#{/option}
			%{
				}
			}%
		
		#{/select}
	#{/secure.check}
	
	%{if (_mainMenu.day != null || _mainMenu.method.name() == 'dailyPresence') {
	}%
		#{select 'day', value:_mainMenu.day, class:'span1', id: 'day', onChange:'javascript:this.form.submit()'}
			%{ for(day in _mainMenu.days){
				}%
				#{option day}${day}#{/option}
				%{
					}
				}%		
		#{/select}		
	%{}}%

	<input class="btn" type="submit" value="Invio">
#{/form}

</div>

#{set 'moreScripts'}
#{get 'moreScripts'/}
<script>
    $(function(){
      // bind change event to select
      $('#method').bind('change', function () {
          var url = $(this).val(); // get selected value
          if (url == 'yearlyAbsences') { // require a URL
    	  		var nuovoUrl = '/yearlyAbsences/'+$('#personId').val()+'/'+$('#year').val();
              	window.location = nuovoUrl; // redirect
          }
          return false;
      });
    });
</script> 
#{/set}