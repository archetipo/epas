#{extends 'modal.html' /}
#{set modalHeader:'Storico modifiche timbrature e assenze '    /}

<div class="container-fluid text-center">


<h3>Timbrature</h3>
<!-- Per ogni timbratura una tabella -->
<div class="well">
#{list items:historyStampingsList, as:'historyStamping'}
  <h5>Storico timbratura ore ${historyStamping.get(0).value.formattedHour()} (id=${historyStamping.get(0).value.id})</h5>
  
  <table class="table table-condensed table-bordered" >

	<tr class="success">
	  <th>Ora timbratura</th>
	  <th>Data modifica</th>
	  <th>Amministratore</th>
	  <th>Tipo</th>
	</tr>
	  
	#{list items:historyStamping, as:'stamping'}  
    <tr class="warning">
      <td>${stamping.value.formattedHour()} ${stamping.value.formattedMark()}</td>
      <td>${stamping.formattedRevisionDate()}</td>
      <td>${stamping.formattedOwner()}</td>
      
      #{if stamping.typeIsDel()}
         <td style="color: red;">${stamping.type}</td>
      #{/if}
      #{else}
         <td>${stamping.type}</td>
      #{/else}
    </tr>
    #{/list}

  </table>

#{/list}
</div>

<h3>Assenze</h3>
<!-- Per ogni assenza una tabella -->
<div class="well">
#{list items:historyAbsencesList, as:'historyAbsence'}
  <h5>Storico assenza codice ${historyAbsence.get(0).value.absenceType.code} (id=${historyAbsence.get(0).value.id})</h5>
  
  <table class="table table-condensed table-bordered" >

	<tr class="success">
	  <th>Codice Assenza</th>
	  <th>Data modifica</th>
	  <th>Amministratore</th>
	  <th>Tipo</th>
	</tr>
	  
	#{list items:historyAbsence, as:'absence'}  
    <tr class="warning">
      <td>
        #{if absence.value.absenceType != null}
      		${absence.value.absenceType.code}
      	#{/if}
      </td>
      <td>${absence.formattedRevisionDate()}</td>
      <td>${absence.formattedOwner()}</td>
      
      #{if absence.typeIsDel()}
         <td style="color: red;">${absence.type}</td>
      #{/if}
      #{else}
         <td>${absence.type}</td>
      #{/else}
      
    </tr>
    #{/list}

  </table>

#{/list}
</div>


</div>