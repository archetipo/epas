

#{extends 'main_admin.html' /}

   
#{functionalMenuForm mainMenu: mainMenu /} 
<h2 id="titoloGestioneStraordinariCompetenze">Gestione straordinari e altre competenze</h2>

    <ul class="nav nav-tabs">
    	<li class="active"><a href="@{Competences.showCompetences(year, month)}#">Competenze</a></li>
    	<li><a href="@{Competences.overtime(year, month)}#">Straordinari</a></li>
    	<li><a href="@{Competences.totalOvertimeHours(year, month)}#">Monte ore</a></li>
    	<li><a href="@{Competences.recapCompetences()}#">Recap competenze</a></li>
    </ul>

<h3 id="titoloGestioneCompetenze">Competenze del mese di <span class="capitalized">&{'views.tags.display.date.month.' + month}</span> ${year}</h3>
<input type="hidden" name="year" value="${year}"/>
<input type="hidden" name="month" value="${month}"/>
<p>Totale ore di straordinario(S1+S2+S3) pagate a <span class="capitalized">&{'views.tags.display.date.month.' + month}</span>: ${totaleOreStraordinarioMensile}</p>
<p>Totale ore di straordinario pagate nell'anno: ${totaleOreStraordinarioAnnuale}</p>
<p>Totale monte ore nell'anno ${year}: ${totaleMonteOre}</p>
<p class="lead">I valori per le reperibilità sono espressi in GIORNI, quelli per straordinari e turni in ORE</p>
<table class="table table-hover">
	<tr>
	  <th class="span2">Nome e cognome</th>
	#{list items:competenceCodes, as:'code'}
	     <th class="span2">
	      ${code.description}<br>
	      ${code.code}
	     </th>
	#{/list}
	</tr>
	
	#{list items:activePersons, as:'person'}
	  <tr>
	  <td class="nomeCognome">${person.name} ${person.surname}</td>
	    #{list items:competenceCodes, as:'code'}
	     <td>
	     #{if person.competenceCode.contains(code)}
	     <a data-x-editable href="#" data-type="number" data-pk="${person.competence(code,year,month).id}" data-name="value"
	     	data-url="@{updateCompetence()}" 
	     	data-title="Modifica ${code.description} per ${person.name} ${person.surname}">${person.competence(code,year,month).valueApproved}</a>
	     </td>
	     #{/if}
	     #{else}
	      <input class="span1" type="number" disabled="disabled"/>
	      <abbr title="La competenza ${code.code}-${code.description} non è attiva per l'utente ${person.name} ${person.surname}" class="initialism">.</abbr>
	     #{/else}
	    #{/list}
	  </tr>  
	#{/list}

</table>



