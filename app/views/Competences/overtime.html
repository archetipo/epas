#{extends 'main_admin_no_menu.html' /}
#{set titolo: 'Gestione straordinari e altre competenze' /}

<ul class="nav nav-tabs">
  <li ><a href="@{Competences.showCompetences(year, month)}#">Competenze</a></li>
  <li class="active"><a href="@{Competences.overtime(year, month)}#">Straordinari</a></li>
  <li><a href="@{Competences.totalOvertimeHours(year, month)}#">Monte ore</a></li>
  <li><a href="@{Competences.recapCompetences()}#">Recap competenze</a></li>
  <li><a href="@{Competences.exportCompetences()}#">Esporta competenze</a></li>
</ul>


<section id="results">
<div class="container span3"style="margin-left: 0px;">
#{form action:@Competences.overtime(), class:'form-search',  
    method:'GET', autocomplete:'off',
    'data-reload':'#results'}
    
    <input type="text" name="name" placeholder="Nome o cognome" value="${name}" class="input-medium search-query"/>
    <i class="icon-search icon-large"></i>
    <input type="hidden" name="year" value="${year}"/>
	<input type="hidden" name="month" value="${month}"/>

#{/form}
</div>
<div class="pagination pagination-centered" style="margin-left: 10px;">
  <ul>
  	#{list items:0..simpleResults.totalPage-1, as:'indexPage', class:'inline'}
  	  #{if simpleResults.page==indexPage}
  	    <li class="active"><a href="#">${indexPage+1}</a></li>
  	  #{/if}
  	  #{else}
  	    <li><a href="@{Competences.overtime(year, month,name, indexPage)}">${indexPage+1}</a></li>
  	  #{/else}
  	  
       
	#{/list}
  </ul>
</div>
    %{if(year != 0 && month != 0){
    }%
	    <input type="hidden" name="year" value="${year}"/>
		<input type="hidden" name="month" value="${month}"/>
	%{
	}else{
	}%
		<input type="hidden" name="year" value="${yearParams}"/>
		<input type="hidden" name="month" value="${monthParams}"/>
	%{
	}
	}%
    <h3 id="titoloStraordinari">Tabella riassuntiva del mese di <span class="capitalized">&{'views.tags.display.date.month.' + month}</span></h3>
    <table class="table overtime-big table-hover">
    	<tr>
	    	<th>Nome e cognome</th>
	    	%{for(col in tableFeature.columnKeySet()){
			}%
			<th>${col}</th>
			%{
			}
			}%

    	</tr>
    	%{  for(entry in tableFeature.rowMap().entrySet()){
		}%
    	<tr>
    		<td class="person">${entry.getKey().surname} ${entry.getKey().name} (${entry.getKey().number})</td>
    		%{ for(col in tableFeature.columnKeySet()){
			}%
			%{if(col.equals('Giorni di Presenza') || col.equals('Ore straordinario pagate') || col.equals('Riposi compens.')){
			}%
				<td>
					${entry.getValue().get(col)}			
				</td>
				%{
				}else{
				}%
				<td>
					${entry.getValue().get(col).toHourTime()}			
				</td>
				%{
				}
				}%
			%{
			}
			}%
    	</tr> 
    	%{
    	}
    	}%   
    </table>

</section>
    
    
    