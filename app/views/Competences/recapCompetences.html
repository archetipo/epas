#{extends 'main_with_navbar.html' /}
#{set titolo: 'Gestione straordinari e altre competenze' /}


  

<ul class="nav nav-tabs">
  <li><a href="@{Competences.showCompetences(year, month)}#">Competenze</a></li>
  <li><a href="@{Competences.overtime(year, month)}#">Straordinari</a></li>
  <li><a href="@{Competences.totalOvertimeHours(year, month)}#">Monte ore</a></li>
  <li class="active"><a href="@{Competences.recapCompetences()}#">Recap competenze</a></li>
  <li><a href="@{Competences.exportCompetences()}#">Esporta competenze</a></li>
</ul>
 
<section id="results">
<div class="container span3"style="margin-left: 0px;">
#{form action:@Competences.recapCompetences(), class:'form-search',  
    method:'GET', autocomplete:'off',
    'data-reload':'#results'}
    
    <input type="text" name="name" placeholder="Nome o cognome" value="${name}" class="input-medium search-query"/>
    <i class="icon-search icon-large"></i>
    <input type="hidden" name="year" value="${year}"/>
	<input type="hidden" name="month" value="${month}"/>

#{/form}
</div>
<div class="pagination pagination-centered" style="margin-left: 10px;">
  <ul>
  	#{list items:0..simpleResults.totalPage-1, as:'indexPage', class:'inline'}
  	  #{if simpleResults.page==indexPage}
  	    <li class="active"><a href="#">${indexPage+1}</a></li>
  	  #{/if}
  	  #{else}
  	    <li><a href="@{Competences.recapCompetences(name, indexPage)}">${indexPage+1}</a></li>
  	  #{/else}
  	  
       
	#{/list}
  </ul>
</div>
 <div class="row">
  <div class="span0"></div>
  <div class="span11" style="margin-left: 5px;">
 
<h3 id="titoloGestioneCompetenze">Da questa pagina puoi definire quali competenze spettano ad ogni persona</h3>

<input type="hidden" name="year" value="${year}"/>
<input type="hidden" name="month" value="${month}"/>


<table class="table table-striped">
	<tr>
		<th>Nome</th>
		%{for(col in tableRecapCompetence.columnKeySet()){
		}%
		<th>${col}</th>
	%{
		}
	}%
	</tr>

	%{  for(entry in tableRecapCompetence.rowMap().entrySet()){
		}%
	<tr>
		<td><a href="@{Competences.updatePersonCompetence(entry.getKey().id)}">${entry.getKey().name}</a> ${entry.getKey().surname}</td>
		%{ for(col in tableRecapCompetence.columnKeySet()){
		}%
		%{ if(entry.getValue().get(col) == true){
		}%	<td>	
				<input type="checkbox" name="name" value ="true" checked="checked" disabled="disabled"/>
			</td>
		%{ 
		}else{
		}%
			<td>	
				<input type="checkbox" name="name" value ="false" disabled="disabled"/>
			</td>
		%{
			}
		}%
		%{
		   }
		}%
	</tr>	
	%{
		}
	}%
</table>
</div>
</div>
</section>

