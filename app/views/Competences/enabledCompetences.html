#{extends 'main.html' /}
#{set header:'navbar' /}
#{set title: 'ePAS - Abilita competenze'  /}

#{competences.competencesTabs activeAction:'enabledCompetences' /}

<div class="container">

	#{title title:'Competenze abilitate ' + office.name, color:'primary' /}

  #{alert color:'info'}
  <p>Cliccando sul nome del dipendente è possibile attivare o disattivare la possibilità di attribuire ogni specifica competenza.</p>
  #{/alert}

  <table class="table table-condensed table-hover table-bordered center" datatable >
		<thead>
		<tr>
			<th>Nome</th>
			<th>Competence Abilitate</th>
		</tr>
		</thead>
		<tbody>

    #{list items:personList, as:'person'}
    <tr>
      <td>
		  <a href="@{Competences.updatePersonCompetence(person.id)}" data-async-modal="#updateCompetenceModal">
		    ${person.fullname}
		  </a>
 	  </td>
 	  <td>
 	   #{list items:templateUtility.allCodeList(), as:'code'}
 	     #{if person.competenceCode.contains(code)}
 	       <span class="label label-primary">${code.code} - ${code.description}</span>
 	     #{/if}
       #{/list}
       </td>
    #{/list}
    </tr>
  </tbody>
  </table>

</div>

<div id="updateCompetenceModal" class="modal fade container" tabindex="-1"></div>


