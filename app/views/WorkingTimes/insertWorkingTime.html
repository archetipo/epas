#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title: 'Creazione nuovo Tipo Orario per ' + office.name  /}

#{set breadcrumbs:['Tipi Orario':@WorkingTimes.manageWorkingTime(), 'Nuovo tipo orario':null] /}
 
<div class="container">

#{breadcrumbs breadcrumbs /}

  <div class="col-md-10 col-md-offset-1">
     
     <!-- Switcher horizontal / vertical -->
     <form class="form-horizontal"> 
       #{f.booleanRadio 'Orario Orizzontale', value:true /}
     </form>
     
     <div id="form-horizontal">
      #{form @WorkingTimes.saveHorizontal(), class:'form-horizontal'}
	  
      <input type="hidden" name="office.id" value="${office.id}"/>
  
	  #{f.input 'horizontalPattern.name', required:'true' /}  
	  #{f.view 'office'  /}
	  
	  <div class="alert alert-success">
	   <h4>Nell'orario orizzontale impostare lo schema giornaliero valido per ogni giorno
	   della settimana ad eccezione dei giorni festivi.</h4>
      </div>	 
	
	  <!-- Tempo a lavoro -->	 

	  #{workingTime.legend tempoALavoro:'true', wttTips:'true' /}			  
	  
	  #{workingTime.input 
	    type:'hoursAndMinutes',
	    title:'Tempo lavoro giornaliero', 
	  	color:'info', 
	  	field:'horizontalPattern.workingTime',
	  	hourValue:horizontalPattern.workingTimeHour,
	  	minuteValue:horizontalPattern.workingTimeMinute  /}
	  	
	  #{workingTime.input 
	    type:'multipleSelect',
	    selectHolidays:'true', 
	    title:'Giorni festivi', 
	  	color:'info', 
	  	field:'horizontalPattern.holidays',
	  	value:horizontalPattern.holidays /}
	  
	  <!-- Buono pasto -->
	  
	  #{workingTime.legend buonoPastoAbilitato:'true', wttTips:'true' /}
	  
	  #{workingTime.input
	   type:'radio', 
	   title:'Calcolo Buono Pasto abilitato',
	   color:'danger',
	   field:'horizontalPattern.mealTicketEnabled',
	   value:horizontalPattern.mealTicketEnabled /}  
  
	  <div id="horizontal-mealticket">
	  #{workingTime.legend buonoPasto:'true', wttTips:'true' /}
	  
      #{workingTime.input 
	    type:'hoursAndMinutes', 
	    title:'Tempo di lavoro minimo per diritto a usufruire del buono pasto', 
	  	color:'danger', 
	  	field:'horizontalPattern.mealTicketTime',
	  	hourValue:horizontalPattern.mealTicketTimeHour,
	  	minuteValue:horizontalPattern.mealTicketTimeMinute /}
	  	
	  #{workingTime.input 
	   type:'minutes', 
	   title:'Durata minima intervallo pranzo', 
	   color:'danger',
	   field:'horizontalPattern.breakTicketTime',
	   value:horizontalPattern.breakTicketTime /}
	  
	  <!-- Soglia buono pasto -->
	  
	  #{workingTime.legend sogliaPomeridiana:'true', wttTips:'true' /}
	  
	  #{workingTime.input
	   type:'radio', 
	   title:'Condizione soglia pomeridiana attiva',
	   color:'danger',
	   field:'horizontalPattern.afternoonThresholdEnabled',
	   value:horizontalPattern.afternoonThresholdEnabled /}  
	  
	   <div id="horizontal-afternoon" style="display: none">	
		  #{workingTime.input 
		   type:'hoursAndMinutes',
		   title:'Soglia pomeridiana per buono pasto',
		   color:'danger',
		   field:'horizontalPattern.ticketAfternoonThreshold',
		   hourValue:horizontalPattern.ticketAfternoonThresholdHour,
		   minuteValue:horizontalPattern.ticketAfternoonThresholdMinute  /}
		
		  #{workingTime.input
		   type:'minutes', 
		   title:'Lavoro minimo per buono pasto dopo soglia pomeridiana',
		   color:'danger',
		   field:'horizontalPattern.ticketAfternoonWorkingTime',
		   value:horizontalPattern.ticketAfternoonWorkingTime /}  
		</div>	
		
	   </div> 	
	  *{		
	  <div class="col-sm-12">
	    #{include './_wttRecap.html' /}
	  </div>
	  }*	
 
	  <div class="center">
	    <input class="btn btn-primary" type="submit" value="Crea"/>
	  </div>
      #{/form}
    </div> <!-- end form horizontal -->
 
  
    <div id="form-vertical" style="display: none">
      #{form @WorkingTimes.save(), class:'form-horizontal'}
  	    <input type="hidden" name="office.id" value="${office.id}"/>
  
	    #{f.input 'horizontalPattern.name', required:'true' /}  
	    #{f.view 'office'  /}
	  
	    <div class="alert alert-success">
	      Nell'orario verticale impostare lo schema giornaliero per ogni singolo
	      giorno.
        </div>	 
        
        <div class="alert alert-danger">
          In fase di implementazione. In caso di necessit√† contattare epas@iit.cnr.it
        </div>
      #{/form}
    </div> <!-- end form vertical -->
   
 </div> 
</div>

#{set 'moreScripts'}
  <script type="text/javascript">
	$(document).ready(function() {
		
		$("input[name='Orario Orizzontale']").change(function(){
			
			jQuery( "#form-horizontal" ).toggle(200);
			jQuery( "#form-vertical" ).toggle(200);
			
		});
		
		$("input[name='horizontalPattern.mealTicketEnabled']").change(function(){
			
			jQuery( "#horizontal-mealticket" ).toggle(0);
		
		});
		

		$("input[name='horizontalPattern.afternoonThresholdEnabled']").change(function(){
			
			jQuery( "#horizontal-afternoon" ).toggle(0);
		
		});
		
		
		
		
		
		
       
	 });
	</script>
#{/set}


