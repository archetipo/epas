<!DOCTYPE html>

<html>
    <head>
        <title>Istituto di Informatica e Telematica - Turni di ${month} ${year}</title>
        <link rel="stylesheet" href="@{'/public/stylesheets/sistorgReportPDF.css'}" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="@{'/public/stylesheets/shiftPDF.css'}" type="text/css" charset="utf-8">
    </head>
    <body>
    		%{
    			mm = 0;
    			
    			mese = firstOfMonth.plusMonths(mm).monthOfYear().getAsText();
    			if (mese.equals('July')) {
    				mese = 'luglio';
    			} else if (mese.equals('June')) {
    				mese = 'giugno';
    			} else if (mese.equals('August')) {
    				mese = 'agosto';
    			}
    		}%
        	<h1>Istituto di Informatica e Telematica </h1>
        
        	<div class="table">
			<table class="mensile">
			<caption> Giorni di turno del personale per il mese di ${mese} ${firstOfMonth.plusMonths(mm).year().getAsText()}</caption>
				
			<tr>
			%{
				for(label in shiftSumDays.columnKeySet()) {
			}%

					<th> Turno ${label}</th> 
			%{
    			}
			}%
			</tr>
			<tr>	
			%{
				for(shift in shiftSumDays.columnKeySet()) {
			}%
				<td> 
				%{
					for(person in shiftSumDays.rowKeySet()) {
				}%	
					%{
						if ((shiftSumDays.contains(person, shift) && !shiftSumDays.contains(person, "Jolly")) || (shiftSumDays.contains(person, shift) && (shift == "Jolly"))) {
						
						if (mode.equals('ore')) {
							num = shiftSumDays.get(person, shift)*6 + (int)(shiftSumDays.get(person, shift)/2) + shiftSumDays.get(person, shift)%2 + ' ore'
						} else {
							num = shiftSumDays.get(person, shift) + ' gg'
						}
					}%
						<p>
						${person.surname} ${person.name}: &nbsp; ${num} 
						</p>
					%{
						}
					}%
					
				%{
    				}
				}%
				</td>
			%{
    			}
			}%
			</tr>
			</table>
      		</div>
      		<div class="date">
      			<strong>Data </strong>&nbsp;&nbsp;${today.getDayOfMonth()}/${today.getMonthOfYear()}/${today.getYear()}
      		</div>
      		<div class="firma dir">
      			<strong>Il Direttore</strong> <br />
      			Dott. Domenico Laforenza
      		</div>
      
     		<div class="firma resp">
      			<strong>Il Responsabile</strong><br />
      			Dott. Maurizio Martinelli
      		</div>
      		
    </body>
</html>