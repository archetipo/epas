<!DOCTYPE html>

<html>
    <head>
        <title>Istituto di Informatica e Telematica - Turni di ${month} ${year}</title>
        <link rel="stylesheet" href="@{'/public/stylesheets/sistorgReportPDF.css'}" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="@{'/public/stylesheets/shiftPDF.css'}" type="text/css" charset="utf-8">
    </head>
    <body>
    		%{
    			mm = 0;
    			
    			mese = firstOfMonth.plusMonths(mm).monthOfYear().getAsText();
    			if (mese.equals('July')) {
    				mese = 'luglio';
    			} else if (mese.equals('June')) {
    				mese = 'giugno';
    			} else if (mese.equals('August')) {
    				mese = 'agosto';
    			}
    		}%
        	<h1>Istituto di Informatica e Telematica </h1>
        
        	<div class="table">
			<table class="mensile">
			<caption> Turni di ${mese} ${firstOfMonth.plusMonths(mm).year().getAsText()}</caption>
				
			<tr>
				<th>GIORNO</th>
				<th colspan='2'> TURNO A</th> 
				<th colspan='2'> TURNO B</th> 
			</tr>
			<tr>
				<th></th>
				<th>Mattina</th>
				<th>Pomeriggio</th>
				<th>Mattina</th>
				<th>Pomeriggio</th>
			</tr>

			%{
				for(int gg = 1; gg <= firstOfMonth.dayOfMonth().withMaximumValue().getDayOfMonth(); gg++) {
			}%
			<tr>
				<td class="${firstOfMonth.plusDays(gg-1).dayOfWeek().getAsShortText()}"> ${gg} ${firstOfMonth.plusDays(gg-1).dayOfWeek().getAsShortText()}</td> 
			
				%{
					for(shift in shiftCalendar.rowKeySet()) {
				}%
					%{
						if (shiftCalendar.contains(shift, gg)) {
					}%
						%{
							if ((shiftCalendar.get(shift, gg).mattina == null) || (shiftCalendar.get(shift, gg).pomeriggio == null)) {
						}%
						
						<td class="${'turno'+shift} annullato" colspan="2">
							 ANNULLATO <br />
						</td>
						%{
							} else {
						}%	
						<td class="${'turno'+shift}"> 
							${shiftCalendar.get(shift, gg).mattina.surname}
						</td>
						<td class="${'turno'+shift}"> 
							${shiftCalendar.contains(shift, gg) ? shiftCalendar.get(shift, gg).pomeriggio.surname : ''}
						</td>
						%{
							}
						}%
					%{
						} else {
					}%
					<td colspan="2"></td>
					%{
						}
					}%
				%{
					}
				}%
	
			</tr>
			%{
   				}
			}%

			</table>
			
      		</div>
      		<div class="date">
      			<trong>Data ${today.getDayOfMonth()}/${today.getMonthOfYear()}/${today.getYear()} </trong>
      		</div>
      		
    </body>
</html>