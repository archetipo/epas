#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title: 'ePAS - Inserimento/modifica figli dei dipendenti' /}

#{set 'moreStyles'}
<style type="text/css">
#content{
  margin-top: 5em;
}
</style>
#{get 'moreStyles' /}
#{/set}

<input type="hidden" name="person.id" value="${person.id}" />

<ul class="nav nav-tabs">
  <li><a href="@{Persons.edit(person.id)}#">Dati Anagrafici di ${person.getFullname()}</a></li>
  <li class="active"><a href="@{Persons.childrenList(person.id)}#">Gestione figli di ${person.getFullname()}</a></li>
</ul>


<div class="container" id="content">
<div class="panel panel-default">

#{if (person.personChildren.isEmpty())}
  <div class="panel-heading">
      <h3>${person.getFullname()} non ha figli in anagrafica</h3>
  </div>

  <div class="panel-body">

#{/if}

#{else}
  <div class="panel-heading">
      <h3>Figli di ${person.getFullname()}</h3>
  </div>
  <div class="panel-body">
  	<table class="table table-hover table-striped">
  		<thead>
    	<tr>
			<th>Nome</th>
			<th>Cognome</th>
			<th>Data di nascita</th>
			<th></th>
		</tr>
  		</thead>
  		<tbody>
    	#{list person.personChildren, as:'child'}
		<tr>
			<td>${child.name}</td>
			<td>${child.surname}</td>
			<td>${child.bornDate}</td>
			<td class="col-xs-3">
				<div class="btn-group pull-right" role="group" >
 					  <a data-modal=".my-modal" role="button" class="btn btn-default" href="@{Persons.editChild(child.id)}">Modifica <i class="fa fa-cogs"></i></a>
  					  <a data-modal=".my-modal" role="button" class="btn btn-default" href="@{Persons.removeChild(child.id)}">Elimina <i class="fa fa-trash"></i></a>
			    </div>
			</td>
		</tr>
		#{/list}
		</tbody>
  	</table>
#{/else}

<a href="@{Persons.insertChild(person.id)}" data-modal=".my-modal" role="button" class="btn btn-primary col-xs-offset-4 col-xs-3">Inserisci nuovo figlio</a>

</div>
</div>
</div>

#{include '_myModal.html' /}