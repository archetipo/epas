#{extends 'main.html' /}

#{logoutForm /}

#{functionalMenuForm mainMenu: mainMenu /} 

<h2 id="titoloModificaDatiPersonali">Modifica dati per l'utente
	${person.name} ${person.surname}</h2>

#{form @Persons.update()}
<input type="hidden" name="personId" value="${person.id}" />

<fieldset>
	<legend>Dati personali</legend>
	<div>
		<b>Cognome</b> <input name="surname" type="text"
			value="${person.surname}" size="20" maxlength="100" />
	</div>
	<div>
		<b>Nome</b> <input name="name" type="text" value="${person.name}"
			size="20" maxlength="50" />
	</div>
	<div>
		Id univoco <input name="personId" type="text" value="${person.id}"
			disabled="disabled" />
	</div>
	<!--  <div>Password <input name="person.password" type="text" value="" size="10" maxlength="10" /></div>-->
	<div>
		Matricola <input name="number" type="text" value="${person.number}"
			size="10" maxlength="10" />
	</div>
	<div>Livello #{select 'person.qualification',
		value:person.qualification.qualification, id:'qualifica'} #{option 0}0#{/option}
		#{option 1}1#{/option} #{option 2}2#{/option} #{option 3}3#{/option}
		#{option 4}4#{/option} #{option 5}5#{/option} #{option 6}6#{/option}
		#{option 7}7#{/option} #{option 8}8#{/option} #{/select}</div>

</fieldset>

<fieldset>
	<legend>Dati Contrattuali</legend>
	<table>
		<tr>
			<th>Data inizio</th>
			<th>Data fine</th>
			<th>Data terminazione esperienza lavorativa</th>
			<th>Attestato presenza</th>
			<th>Modifica</th>
		</tr>
		%{ for(contract in contractList){ }%
		<tr>
			<td><input name="beginContract" type="date" readOnly="readOnly"
				value="${contract.beginContract}" size="10" maxlength="10" /></td>
			<td><input name="expireContract" type="date" readOnly="readOnly"
				value="${contract.expireContract}" size="10" maxlength="10" /></td> %{
			if(contract.endContract == null){ }%
			<td><a href="@{Persons.terminatePerson(person.id)}">Termina
					contratto</a></td> %{ } else{ }%
			<td><input name="endContract" type="date" readOnly="readOnly"
				value="${contract.endContract}" /></td> %{ } }%
			<td><input name="onCertificate" type="checkbox" readOnly="readOnly"
				value="${contract.onCertificate}" /></td>
			<td>
			<a href="@{Persons.modifyContract(contract.id)}" class="modifyContract${contract.id}"><input value="Modifica" class="Forminput" type="button"></a>
			<script type="text/javascript"> 
				$('.modifyContract${contract.id}').popupWindow({ 
				height:500, 
				width:800, 
				top:50, 
				left:50 
				}); 
				</script>
			</td>
		</tr>
		%{ } }%
	</table>

</fieldset>

<fieldset>
	<legend>Informazioni di ubicazione e contatti</legend>
	<input type="hidden" name="location.person_id" value="${person.id}" />
	<p>
		Dipartimento <input name="department" type="text"
			value="${person.location.department}" size="20" maxlength="100" />
	</p>
	<p>
		Sede <input name="headOffice" type="text"
			value="${person.location.headOffice}" size="20" maxlength="200" />
	</p>
	<p>
		Stanza <input name="room" type="text" value="${person.location.room}"
			size="20" maxlength="200" />
	</p>
	<p>
		Telefono <input name="telephone" type="text"
			value="${person.contactData.telephone}" size="20" maxlength="200" />
	</p>
	<p>
		Email <input name="email" type="text"
			value="${person.contactData.email}" size="20" maxlength="200" />
	</p>
	<p>
		Data di nascita <input name="bornDate" type="text"
			value="${person.bornDate}" size="20" maxlength="200" />
	</p>
</fieldset>

<fieldset>
	<legend>Informazioni su straordinari e reperibilità</legend>
	<p>Fra parentesi nella cella relativa agli straordinari diurni, il numero di ore disponibili nel mese da poter essere utilizzate per gli
	straordinari</p>
	<p>Nel caso si volessero modificare i valori degli straordinari del mese precedente, clicca qui ---> <a href="@{Competences.updateOldOvertime(person.id)}" class="updateOldOvertime${person.id}">Modifica gli straordinari per il mese precedente</a><script type="text/javascript"> 
				$('.updateOldOvertime${person.id}').popupWindow({ 
				height:500, 
				width:800, 
				top:50, 
				left:50 
				}); 
				</script></p>
	
	
	<table id="competenze">
		<tr>
			
			<th class="competenze">Ind.tà rep.tà feriale (207)</th>
			<th class="competenze">Ind.tà rep.tà festiva (208)</th>
			<th class="competenze">Straordinario diurno nei giorni lavorativi (S1)</th>
			
		</tr>
		<tr>
			
			<td class="comp"><input type="text" value="${weekDayAvailability}" size="4" maxlength="4"/></td>
			<td class="comp"><input type="text" value="${holidaysAvailability}"size="4" maxlength="4"/></td>
			<td class="comp">(${progressive})<input type="text" value="${daylightWorkingDaysOvertime}"size="4" maxlength="4"/></td>
			
		</tr>
		
	</table>
</fieldset>
<input id="submitEditPerson"type="submit" value="Ok" />
#{/form} #{form @Persons.discard()}
<input id="discardEditPerson" type="submit" value="Annulla" />
#{/form} #{form @Persons.deletePerson(person.id)}
<input id="deletePerson" type="submit" value="Elimina" />
#{/form}
