#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title: 'ePAS - Modifica ' + person.fullname /}

#{set 'moreStyles'}
<style>
  .panel {
  	margin-top: 20px;
  }
  
  #table-list-contract {
  	margin-top: 30px;
  	margin-bottom: 10px;
  }
</style>
#{/set}

#{persons.personsTabs activeAction:'edit' /}

<div class="container">		<!-- Container dati personali e di contatto -->

	#{form @Persons.update(),,class:'form-horizontal' }
		<input type="hidden" name="person.id" value="${person.id}"/>
		
		<!-- Pannello 1 Dati personali -->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title"><span class="badge">1</span> Dati Personali</h3>
			</div>
			<div class="panel-body">

				#{f.input 'person.surname'/}
				#{f.input 'person.name'/}
				#{f.input 'person.number',type:'number'/}
				#{f.input 'person.badgeNumber'/}
				#{f.input 'person.email'/}

				#{f.selectModel 'person.qualification',items:templateUtility.allQualifications /}
				#{f.selectModel 'person.office',items:templateUtility.officesAllowed() /}

				#{f.checkbox 'person.isPersonInCharge',title:'Selezionare se la persona in questione deve essere un responsabile'/}

				<div class='form-group'>
					<label class="col-sm-3 control-label">Invio mail</label>
					<div class="col-sm-6">
						<a class="btn btn-default" href="@{Persons.modifySendEmail(person.id)}" data-modal=".my-modal">
							#{if person.wantEmail}<i class="fa fa-check-square-o"></i> Attivo#{/if}
							#{else}<i class="fa fa-square-o"></i> Inattivo#{/else}
						</a>
					</div>
				</div>
				<p>
					Abilitando l'invio mail per il dipendente, si permetter√† alle procedure di controllo sui 
					<strong><em>giorni con timbrature disaccoppiate</em></strong> e sui
					<strong><em>giorni con mancanza di timbrature e codici assenza</em></strong>, di inviare una mail
					al dipendente contenente i giorni in cui sono stati riscontrati i casi descritti.
				</p>

			</div>
		</div>  <!-- Fine pannello 1 -->
		
		<!-- Pannello 2 Contatti -->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title"><span class="badge">2</span> Altre informazioni</h3>
			</div>
			<div class="panel-body">

				#{f.input 'person.telephone'/}
				#{f.date 'person.birthday',view:'year'/}
				#{f.input 'person.eppn'/}

				<p>Il campo opzionale <strong>Eppn</strong> viene utilizzato per il login shibboleth quando attivo.</p>

			</div>
		</div>	<!-- Fine pannello 2 -->
		
				<div class="container-fluid center">
		   <input class="btn btn-primary" type="submit" value="Salva" />
		</div>
	#{/form}
		
</div>
		


