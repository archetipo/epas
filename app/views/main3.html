<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" type="image/png" href="@{'/public/favicon.ico'}">

    <title>#{get 'title' /}</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" media="screen" href="@{'/public/bootstrap-3.1.1-dist/css/bootstrap.min.css'}" />
	<link rel="stylesheet" media="screen" href="@{'/public/stylesheets/my-bootstrap3.css'}" />
	<link rel="stylesheet" media="screen" href="@{'/public/font-awesome-4.0.3/css/font-awesome.min.css'}"/>
	<link rel="stylesheet" media="screen" href="@{'/public/bootstrap-datepicker/css/datepicker.css'}"/>
	<link rel="stylesheet" href="@{'/public/morris.js-0.4.3/morris.css'}">
	<link rel="stylesheet" href="@{'/public/feedback-master/feedback.min.css'}" />
    
    <!-- Custom styles for this template -->
    <!-- <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet"/>  -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet"/>
	#{get 'moreStyles' /}
	
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    
    <!-- All JavaScript at the bottom, except for Modernizr / Respond.
	<!-- Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries -->
	<!-- For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->
	<script src="@{'/public/js/libs/modernizr-2.0.6.min.js'}"></script>
    
  </head>

  <body>
  
   <div id="wrapper">

    #{if header.equals('navbar') }
    
    <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">ePAS
 
          <small class="visible-xs">XS</small>
          <small class="visible-sm">SM</small>
          <small class="visible-md">MD</small>
          <small class="visible-lg">LG</small>

          
          </a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            #{if dropDown.equals("dropDown1") }
            <li class="dropdown active">
            #{/if}
            #{else}
            <li class="dropdown">  
            #{/else}
            
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span>
          		${session.username} <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="@{Stampings.stampings(session.get("yearSelected"), session.get("monthSelected"))}">Situazione mensile</a></li>
            
            	<li><a href="@{Absences.absences(session.get("yearSelected"), session.get("monthSelected"))}">Assenze mensili</a></li>
            	<li><a href="@{YearlyAbsences.absencesPerPerson(session.get("yearSelected"))}">Assenze annuali</a></li>
            	<li><a href="@{Vacations.show(session.get("yearSelected"))}">Ferie</a></li>
            	<li><a href="@{Competences.competences(session.get("yearSelected"), session.get("monthSelected"))}">Competenze</a></li>
            	<li><a href="@{PersonMonths.hourRecap(session.get("yearSelected"))}">Riepilogo orario</a></li>
            	<li><a href="@{PersonMonths.trainingHours(session.get("yearSelected"))}">Ore di formazione</a></li>
            	<li class="divider"></li>
            	<li><a href="#">Stampa cartellino presenze</a></li>
            	<li class="divider"></li>
            	<li><a href="@{Persons.changePassword()}">Gestione password</a></li>
              </ul>
            </li>
          </ul>
          
          #{secure.check "viewPersonList"}
          <ul class="nav navbar-nav">
            #{if dropDown.equals("dropDown2") }
            <li class="dropdown active">
            #{/if}
            #{else}
            <li class="dropdown">  
            #{/else}
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bar-chart-o"></i>
          		Amministrazione <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="@{Persons.list()}">Lista Persone</a></li>
                <li class="divider"></li>
                <li><a href="@{Stampings.personStamping(session.get("personSelected"), session.get("yearSelected"), session.get("monthSelected"))}">Timbrature</a></li>
                <li><a href="@{YearlyAbsences.showGeneralMonthlyAbsences(session.get("yearSelected"), session.get("monthSelected"))}">Assenze</a></li>
                <li><a href="@{Competences.showCompetences(session.get("yearSelected"), session.get("monthSelected"))}">Competenze</a></li>
                <li><a href="@{VacationsAdmin.list(session.get("yearSelected"))}">Ferie e Permessi</a></li>
                <li class="divider"></li>
                <li><a href="@{Stampings.missingStamping(session.get("yearSelected"), session.get("monthSelected") )}">Timbrature Mancanti</a></li>
                <li><a href="@{Stampings.dailyPresence(session.get("yearSelected"), session.get("monthSelected"), session.get("daySelected") )}">Presenza Giornaliera</a></li>
                <li><a href="@{MonthRecaps.show(session.get("yearSelected"), session.get("monthSelected") )}">Riepilogo Mensile</a></li>
                <li><a href="@{Stampings.mealTicketSituation(session.get("yearSelected"), session.get("monthSelected") )}">Riepilogo Buoni Mensa</a></li>
                <li class="divider"></li>
                <li><a href="@{UploadSituation.show()}">Invio Attestati</a></li>
              </ul>
            </li>
          </ul>
          #{/secure.check}
          
          #{secure.check "viewPersonList"}
          <ul class="nav navbar-nav">
            #{if dropDown.equals("dropDown3") }
            <li class="dropdown active">
            #{/if}
            #{else}
            <li class="dropdown">  
            #{/else}
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-cog"></i>
          		Configurazione <b class="caret"></b></a>
              <ul class="dropdown-menu">
                
                <li><a href="@{Administrators.list()}">Amministratori</a></li>
                <li><a href="@{Offices.showOffices()}">Sedi</a></li>
                <li><a href="@{WorkingTimes.manageWorkingTime()}">Orari Lavoro</a></li>
                <li><a href="@{Administrators.list()}">Codici Assenze</a></li>
                <li><a href="@{Administrators.list()}">Codici Competenze</a></li>
                <li><a href="@{Administrators.list()}">Parametri</a></li>
                
              </ul>
            </li>
          </ul>
          #{/secure.check}
          
          #{if switchYear != null && switchYear == true }
          <ul id="nav-year" class="nav navbar-nav">
       		<li class="dropdown">
          	  <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="badge">${session.get("yearSelected")}</span><b class="caret"></b></a>
          	  <ul class="dropdown-menu">
            	<li><a href="@{SwitchTemplate.updateYear(2013)}">2013</a></li>
            	<li><a href="@{SwitchTemplate.updateYear(2014)}">2014</a></li>
            	<li><a href="@{SwitchTemplate.updateYear(2015)}">2015</a></li>            
          	  </ul>
        	</li>
      	  </ul>
      	  #{/if}
      
          #{if switchMonth != null && switchMonth == true }
      	  <ul id="nav-month" class="nav navbar-nav">
        	<li class="dropdown">
          	  <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="badge">${templateUtility.monthName(session.get("monthSelected"))}</span><b class="caret"></b></a>
          	  <ul class="dropdown-menu">
            	<li><a href="@{SwitchTemplate.updateMonth(1)}">Gennaio</a></li>
            	<li><a href="@{SwitchTemplate.updateMonth(2)}">Febbraio</a></li>
            	<li><a href="@{SwitchTemplate.updateMonth(3)}">Marzo</a></li>
            	<li><a href="@{SwitchTemplate.updateMonth(4)}">Aprile</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(5)}">Maggio</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(6)}">Giugno</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(7)}">Luglio</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(8)}">Agosto</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(9)}">Settembre</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(10)}">Ottobre</a></li> 
            	<li><a href="@{SwitchTemplate.updateMonth(11)}">Novembre</a></li>  
            	<li><a href="@{SwitchTemplate.updateMonth(12)}">Dicembre</a></li>               
          	  </ul>
        	</li>
      	  </ul>
      	  #{/if}
      	  
      	  #{if switchDay != null && switchDay == true }
      	  #{secure.check "viewPersonList"}
      	  	#{form @SwitchTemplate.updateDay(), class: 'navbar-form navbar-left my-navbar-form', onChange:'javascript:this.form.submit()' }
      	  	<div class="form-group">
      	  	<!-- Lista giorni -->
          	  #{select 'day', value:session.get("daySelected"), class:'form-control', id:'day', onChange:'javascript:this.form.submit()'}
		  		#{list items:1..dayLenght, as:'d'}
		    		#{option d}${d}#{/option}
	  			#{/list}
		  	  #{/select}
		  	</div>
  			
      		#{/form}
      	  #{/secure.check}
      	  #{/if}
      	  
      	  #{if switchPerson != null && switchPerson == true }
      	  #{secure.check "viewPersonList"}
      	  	#{form @SwitchTemplate.updatePerson(), class: 'navbar-form navbar-left my-navbar-form', onChange:'javascript:this.form.submit()' }
      	  	<div class="form-group">
      	  	<!-- Lista persone -->
          	  #{select 'personId', value:session.get("personSelected"), class:'form-control', id:'person', onChange:'javascript:this.form.submit()'}
		  		#{list items:navPersons, as:'person'}
		    		#{option person.id}${person.surname + ' ' + person.name}#{/option}
	  			#{/list}
		  	  #{/select}
		  	</div>
  			
      		#{/form}
      	  #{/secure.check}
      	  #{/if}


      	  #{if session.contains("sudo.username")}
      	    <ul class="nav navbar-nav navbar-right">
      	    
      	      #{if loginResponse != null}
      	      <li  data-toggle="tooltip" data-placement="bottom" title="Login effettuato su Attestati CNR" >
      	        <a style="color: red"><span class="glyphicon glyphicon-user"> ${loginResponse.getUsernameCnr()}</a>
      	      </li>
      	      #{/if}
      	      
      	      <li><a href="@{Administrators.restoreUser()}"><span class="glyphicon glyphicon-log-out"></span> Torna chi eri</a></li>
            
            </ul>
  		  #{/if}
  		  
  		  
  		  
  		  #{else}
    	    #{if session.username}
      		  <ul class="nav navbar-nav navbar-right">
      		  
      		    #{if loginResponse != null}
      	        <li  data-toggle="tooltip" data-placement="bottom" title="Login effettuato su Attestati CNR" >
      	          <a style="color: red"><span class="glyphicon glyphicon-user"> ${loginResponse.getUsernameCnr()}</a>
      	        </li>
      	        #{/if}
      		
     		    #{secure.permissionCheck}
	   	        <li><a href="@{Faq.faq()}"><i class="fa fa-comment-o"></i> FAQ</a></li>
      	        #{/secure.permissionCheck}
    	    
    	        <li><a href="@{secure.logout()}"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
    	      </ul>
    	    #{/if}
  		  
  		  #{/else}
  		  
  		  
  		  
  		  
  		  
  		  
  		  
  		  
  		  
  		  <!-- flash error icon 
          <div class=container>
            #{if flash.error}
              <ul class="nav navbar-nav navbar-right">
      	        <li><a href="@{Administrators.restoreUser()}"><i class="fa fa-info-circle fa-lg" style="color: red;"></i></a></li>
              </ul>
            #{/if}
            #{if flash.success}
              <ul class="nav navbar-nav navbar-right">
      	        <li><a href="@{Administrators.restoreUser()}"><i class="fa fa-info-circle fa-lg" style="color: green;"></i></a></li>
              </ul>
            #{/if}
          </div>
          -->
      
      
        </div>
        
      </div>
    </div> <!-- End Fixed navbar -->
    
    #{/if}
    
    #{if header.equals('banner') }
    <!-- Banner -->
	<div id="banner">
      <img class="img-responsive" src="/public/images/time_banner.jpg" alt="alt">
      <img class="img-responsive pull-right hidden-xs" src="/public/images/logo.jpg" alt="alt">
    </div>
	#{/if}
	
    <!-- Begin page content -->
    <div class="container-fluid" id="page_content">
       
      <!-- do layout -->
      #{doLayout /}

    </div>
    
    <!-- Altri componenti html -->
    #{if flash.error}
      <div id="flash-error" class="popover bottom">
        <div class="arrow"></div>
        <h3 class="popover-title"><strong>Notifica</strong>
          <button id="buttonError" type="button" class="close" aria-hidden="true">&times;</button>
        </h3>
        <div class="popover-content">
          <strong>${flash.error}</strong>
        </div>
      </div>
    #{/if}
    #{if flash.success}
      <div id="flash-success" class="popover bottom">
        <div class="arrow"></div>
        <h3 class="popover-title"><strong>Notifica</strong>
          <button id="buttonSuccess" type="button" class="close" aria-hidden="true">&times;</button>
        </h3>
        <div class="popover-content">
          <strong>${flash.success}</strong>
        </div>
      </div>
    #{/if}  
      
   </div>

   <footer>
     <div class="container-fluid">
       <p>Created with <a href="http://www.playframework.org">play framework</a> and really inspired from the "orologio" application developed by Pasquale Lazzareschi</p>
     </div>
   </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    
    <script src="@{'/public/bootstrap-3.1.1-dist/js/bootstrap.js'}" type="text/javascript"></script>
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap-editable/js/bootstrap-editable.min.js"></script>  -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <script src="@{'/public/bootstrap-datepicker/js/bootstrap-datepicker.js'}" type="text/javascript"></script>
	<script src="@{'/public/morris.js-0.4.3/spec/vendor/raphael-2.1.0.min.js'}"></script>
	<script src="@{'/public/morris.js-0.4.3/morris.min.js'}"></script>
    <script src="@{'/public/feedback-master/feedback.js'}"></script>
    
    <script src="@{'/public/js/script.js'}"></script>
     
    #{include './feedback.html' /}  
	#{get 'moreScripts' /}
  </body>
</html>