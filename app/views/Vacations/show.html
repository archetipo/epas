#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title:'ePAS - Ferie e permessi' /}

<!-- container pagina ferie -->
<div class="row-fluid container">
   
	
	<div class="container col-xs-12 col-md-6">
	<!-- panel Ferie -->
	<div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Ferie</h3>
      </div>
      <div class="panel-body">
      
      <table class="table table-bordered table-hover">
      <tr class="warning">
        <th>Anno</th>
        <th>Totali (maturate)</th>
        <th>Utilizzate</th>
        <th>Residue (maturate)</th>
      </tr>

      <!-- Ferie Past year -->  	
      <tr>
        <!-- year -->
        <td>${vacationShowDto.year-1}</td>
        <!-- totali (maturate) -->
        <td>${vacationShowDto.previousYearVacationTotal} (${vacationShowDto.previousYearVacationAccrued})</td>
        <!-- utilizzate -->
        <td>
		  #{if vacationShowDto.previousYearVacationUsed.size() != 0 } 
           <a data-toggle="modal" href="@{Vacations.vacationsLastYear(vacationShowDto.year)}" data-target="#myModal3">
			${vacationShowDto.previousYearVacationUsed.size()}
		  </a>
		  #{/if}
		  #{else} 0 #{/else}     
	    </td>
	    <!-- residue (maturate) -->
        <td>${vacationShowDto.previousYearVacationTotal - vacationShowDto.previousYearVacationUsed.size()} 
           (${vacationShowDto.previousYearVacationAccrued - vacationShowDto.previousYearVacationUsed.size()}) </td>
        </td>
      </tr>
      
      <!-- Ferie Current year -->
      <tr>
        <!-- year -->
        <td>${vacationShowDto.year}</td>
        <!-- totali (maturate) -->
        <td>${vacationShowDto.queryYearVacationTotal} (${vacationShowDto.queryYearVacationAccrued})</td>
        <!-- utilizzate -->
        <td>
		  #{if vacationShowDto.queryYearVacationUsed.size() != 0 } 
           <a data-toggle="modal" href="@{Vacations.vacationsCurrentYear(vacationShowDto.year)}" data-target="#myModal3">
			${vacationShowDto.queryYearVacationUsed.size()}
		  </a>
		  #{/if}
		  #{else} 0 #{/else}     
	    </td>
	    <!-- residue (maturate) -->
        <td>${vacationShowDto.queryYearVacationTotal - vacationShowDto.queryYearVacationUsed.size()} 
           (${vacationShowDto.queryYearVacationAccrued - vacationShowDto.queryYearVacationUsed.size()}) </td>
        </td>
      </tr>
  	</table>
      
      </div>
    </div> <!-- end panel Ferie -->
	</div>
	
	<div class="container col-xs-12 col-md-6">
	<!-- panel Permessi -->
	<div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Permessi legge 937/77</h3>
      </div>
      <div class="panel-body">
      
      <table class="table table-bordered table-hover">
      <tr class="warning">
        <th>Anno</th>
        <th>Totali (maturati)</th>
        <th>Utilizzati</th>
        <th>Residui (maturati)</th>
      </tr>  	
      <tr>
        <!-- year -->
        <td>${vacationShowDto.year}</td>
        <!-- totali (maturate) -->
        <td>${vacationShowDto.queryYearPermissionTotal} (${vacationShowDto.queryYearPermissionAccrued})</td>
        <!-- utilizzate -->
        <td>
		  #{if vacationShowDto.queryYearPermissionUsed.size() != 0 } 
           <a data-toggle="modal" href="@{Vacations.permissionCurrentYear(vacationShowDto.year)}" data-target="#myModal3">
			${vacationShowDto.queryYearPermissionUsed.size()}
		  </a>
		  #{/if}
		  #{else} 0 #{/else}     
	    </td>
	    <!-- residue (maturate) -->
        <td>${vacationShowDto.queryYearPermissionTotal - vacationShowDto.queryYearPermissionUsed.size()} 
           (${vacationShowDto.queryYearPermissionAccrued - vacationShowDto.queryYearPermissionUsed.size()}) </td>
        </td>
      </tr>
  	</table>
      
      
      </div>
    </div>  <!-- end panel Permessi -->
    </div>
	
</div>
	
<div class="row-fluid container">
    <div class="container col-xs-12 col-md-6">	
	<!-- panel Piani -->
	<div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Piani ferie associati al contratto corrente</h3>
      </div>
      <div class="panel-body">
      
      <table class="table table-bordered table-hover center">
    <tr class="info">
      <th>Descrizione</th>
      <th>Data inizio</th>
      <th>Data fine</th>
    </tr>
    
    #{list items: vacationsRecap.get().contract.vacationPeriods, as: 'vp'}
    <tr>
      <td>${vp.vacationCode.description}</td>
      <td>${vp.beginFrom}</td>
      <td>${vp.endTo}</td>
    </tr>
    #{/list}
    
    </table>
      
      
      </div>
    </div> <!-- end panel Piani -->
    </div>
</div>

      
 

<div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-center">
    
    <div class="modal-content">
             
    </div><!-- /.modal-content -->
           
    
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->







