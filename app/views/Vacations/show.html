#{extends 'main_admin_no_menu.html' /}
#{set title:vacationsRecap.person.surname + ' ' + vacationsRecap.person.name + ', matricola=' + vacationsRecap.person.number /}
#{set titolo: 'Situazione ferie e permessi anno ' + vacationsRecap.year + ' di ' + vacationsRecap.person.surname + ' ' + vacationsRecap.person.name /}

<br>

<div class="container">

<div class="span10">

  <input type="hidden" name="personId" value="${vacationsRecap.person.id}" />	
  <table class="table vacation-recap" id="ferie">
	<tr>
		<th colspan=2 class="ferieFatte">Ferie fatte</th>
		<th rowspan=3>Permessi legge 937/77 fatti</th>
		<th colspan=7 class="residuo">Residuo</th>
	</tr>
	<tr>
		<th rowspan=2>${vacationsRecap.year-1} anno precedente</th>
		<th rowspan=2>${vacationsRecap.year} anno richiesto</th>
		<th rowspan=2>ferie ${vacationsRecap.year-1}</th>
		<th colspan=3>ferie ${vacationsRecap.year}</th>
		<th colspan=3>permessi</th>
	</tr>
	<tr>
		<th>tot.</th>
		<th>mat.</th>
		<th>res.</th>
		<th>tot.</th>
		<th>mat.</th>
		<th>res.</th>
	</tr>
	<tr>
	
		<td>
			<a data-toggle="modal" href="@{Vacations.vacationsLastYear(vacationsRecap.person.id, vacationsRecap.year)}" data-target="#myModal3">
				${vacationsRecap.vacationDaysLastYearUsed.size()}
			</a> 
			</td>
		<td>
			<a data-toggle="modal" href="@{Vacations.vacationsCurrentYear(vacationsRecap.person.id, vacationsRecap.year)}" data-target="#myModal3">
				${vacationsRecap.vacationDaysCurrentYearUsed.size()}
			</a> 
			</td>
		<td>${vacationsRecap.permissionUsed}</td>
		
		<td>${vacationsRecap.vacationDaysLastYearNotYetUsed}</td>
		<td>${vacationsRecap.vacationDaysCurrentYearTotal}</td>
		
		
		
		<td>${vacationsRecap.vacationDaysCurrentYearAccrued}</td>
		
		<td>${vacationsRecap.vacationDaysCurrentYearAccrued - vacationsRecap.vacationDaysCurrentYearUsed.size()}</td>
		
		<td>${vacationsRecap.permissionCurrentYearTotal}</td>
		<td>${vacationsRecap.permissionCurrentYearAccrued}</td>
		
		<td>${vacationsRecap.permissionCurrentYearAccrued - vacationsRecap.permissionUsed}</td>
		

		
	</tr>

  </table>

  <div>
    <br>
    <p><h4>I residui di ferie e permessi per l'anno in corso sono indicati su 2 colonne:</h4></p>
    <p><b>tot.</b>: Giorni residui totali di ferie o permessi</p>
    <p><b>mat.</b>: Giorni di ferie o permesso maturati fino ad oggi</p>
  </div>

</div>

<div class="span4">
  <br>
  <p><h4>Piani ferie associati al contratto corrente</h4></p>
  <table class="table table-hover table-condensed vacation-recap">
    <tr>
      <th>Descrizione</th>
      <th>Data inizio</th>
      <th>Data fine</th>
    </tr>
    
    #{list items: vacationsRecap.vacationPeriodList, as: 'vp'}
    <tr>
      <td>${vp.vacationCode.description}</td>
      <td>${vp.beginFrom}</td>
      <td>${vp.endTo}</td>
    </tr>
    #{/list}
    
  </table>
</div>

</div>



<div id="myModal3" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Ferie</h3>
  </div>
  <div class="modal-body">
    <p></p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
   <!--   <button class="btn btn-primary">Save changes</button>-->
  </div>
</div>