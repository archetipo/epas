#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title:'ePAS - Ferie e permessi' /}



<div class="row">
  <div class="container col-sm-8 col-sm-offset-2 container-main center">
	<h4>Ferie</h4>
  
  	<table class="table table-bordered table-hover">
      <tr class="info">
        <th>Anno</th>
        <th>Totali (maturate)</th>
        <th>Utilizzate</th>
        <th>Residue</th>
      </tr>  	
      <tr>
        <td>${vacationsRecap.year-1}</td>
        <td>${vacationsRecap.vacationDaysLastYearAccrued} (${vacationsRecap.vacationDaysLastYearAccrued})</td>
        <td>
          #{if vacationsRecap.vacationDaysLastYearUsed.size() != 0 } 
           <a data-toggle="modal" href="@{Vacations.vacationsLastYear(vacationsRecap.person.id, vacationsRecap.year)}" data-target="#myModal3">
			${vacationsRecap.vacationDaysLastYearUsed.size()}
		  </a>
		  #{/if}
		  #{else} 
		    0 
		  #{/else}
          
	    </td>
        <td>${vacationsRecap.vacationDaysLastYearNotYetUsed}</td>
      </tr>
      <tr>
        <td>${vacationsRecap.year}</td>
        <td>${vacationsRecap.vacationDaysCurrentYearTotal} (${vacationsRecap.vacationDaysCurrentYearAccrued})</td>
        <td>
          #{if vacationsRecap.vacationDaysCurrentYearUsed.size() != 0 } 
          <a data-toggle="modal" href="@{Vacations.vacationsCurrentYear(vacationsRecap.person.id, vacationsRecap.year)}" data-target="#myModal3">
			${vacationsRecap.vacationDaysCurrentYearUsed.size()}
		  </a>
		  #{/if}
		  #{else} 
		    0 
		  #{/else}
		</td>
        <td>${vacationsRecap.vacationDaysCurrentYearAccrued - vacationsRecap.vacationDaysCurrentYearUsed.size()}</td>
      </tr>
  	</table>
  
  </div>
  
  <div class="container col-sm-8 col-sm-offset-2 container-main container-margintop center">
	<h4>Permessi legge 937/77</h4>
  
  	<table class="table table-bordered table-hover">
      <tr class="info">
        <th>Anno</th>
        <th>Totali (maturati)</th>
        <th>Utilizzati</th>
        <th>Residui</th>
      </tr>  	
      <tr>
        <td>${vacationsRecap.year}</td>
        <td>${vacationsRecap.permissionCurrentYearTotal} (${vacationsRecap.permissionCurrentYearAccrued})</td>
        <td>
        
          #{if vacationsRecap.permissionUsed.size() != 0 } 
            <a data-toggle="modal" href="@{Vacations.permissionCurrentYear(vacationsRecap.person.id, vacationsRecap.year)}" data-target="#myModal3">
			${vacationsRecap.permissionUsed.size()}
		    </a>
		  #{/if}
		  #{else} 
		    0 
		  #{/else}
         
        </td>
        <td>${vacationsRecap.permissionCurrentYearAccrued - vacationsRecap.permissionUsed.size()}</td>
      </tr>
  	</table>
  
  </div>
</div>  
  
<div class="row">
 <div class="container col-sm-8 col-sm-offset-2 container-main container-margintop container-marginbottom center">
  <h4>Piani ferie associati al contratto corrente</h4>
  <table class="table table-bordered table-hover center">
    <tr class="info">
      <th>Descrizione</th>
      <th>Data inizio</th>
      <th>Data fine</th>
    </tr>
    
    #{list items: vacationsRecap.vacationPeriodList, as: 'vp'}
    <tr>
      <td>${vp.vacationCode.description}</td>
      <td>${vp.beginFrom}</td>
      <td>${vp.endTo}</td>
    </tr>
    #{/list}
    
  </table>
 </div>
</div>



<div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-center">
    
    <div class="modal-content">
             
    </div>
           
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->







