#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title:'ePAS - Ferie e permessi' /}


<div class="container">

#{title title:('Ferie e Permessi ' + session.get("yearSelected")) /}

   
   #{list items:vacationsRecapList, as:'vacationsRecap'}
	
	#{panel title:'Ferie', dim:6, color:'primary' }
	     
      <table class="table table-bordered table-hover">
      <tr class="warning">
        <th>Anno</th>
        <th>Totali (maturate)</th>
        <th>Utilizzate</th>
        <th>Residue (maturate)</th>
      </tr>

      <!-- Ferie Past year -->  	
      <tr>
        <!-- year -->
        <td>${vacationsRecap.year - 1}</td>
        <!-- totali (maturate) -->
        <td>${vacationsRecap.vacationDaysLastYearAccrued} (${vacationsRecap.vacationDaysLastYearAccrued})</td>
        <!-- utilizzate -->
        <td>
		  #{if vacationsRecap.vacationDaysLastYearUsed != 0 } 
           <a href="@{Vacations.vacationsLastYear(vacationsRecap.year)}" data-async-modal="#defaultModal">
			${vacationsRecap.vacationDaysLastYearUsed}
		  </a>
		  #{/if}
		  #{else} 0 #{/else}     
	    </td>
	    <!-- residue (maturate) -->
        <td>${vacationsRecap.vacationDaysLastYearNotYetUsed} 
           (${vacationsRecap.vacationDaysLastYearNotYetUsed}) </td>

      </tr>
      
      <!-- Ferie Current year -->
      <tr>
        <!-- year -->
        <td>${vacationsRecap.year}</td>
        <!-- totali (maturate) -->
        <td>${vacationsRecap.vacationDaysCurrentYearTotal} (${vacationsRecap.vacationDaysCurrentYearAccrued})</td>
        <!-- utilizzate -->
        <td>
		  #{if vacationsRecap.vacationDaysCurrentYearUsed != 0 } 
           <a href="@{Vacations.vacationsCurrentYear(vacationsRecap.year)}" data-async-modal="#defaultModal">
			${vacationsRecap.vacationDaysCurrentYearUsed}
		  </a>
		  #{/if}
		  #{else} 0 #{/else}     
	    </td>
	    <!-- residue (maturate) -->
        <td>${vacationsRecap.vacationDaysCurrentYearTotal - vacationsRecap.vacationDaysCurrentYearUsed} 
           (${vacationsRecap.vacationDaysCurrentYearAccrued - vacationsRecap.vacationDaysCurrentYearUsed}) </td>

      </tr>
  	</table>
  	
	#{/panel}
	
	#{panel title:'Permessi legge 937/77', dim:6, color:'primary' }
	      
      <table class="table table-bordered table-hover">
      <tr class="warning">
        <th>Anno</th>
        <th>Totali (maturati)</th>
        <th>Utilizzati</th>
        <th>Residui (maturati)</th>
      </tr>  	
      <tr>
        <!-- year -->
        <td>${vacationsRecap.year}</td>
        <!-- totali (maturate) -->
        <td>${vacationsRecap.permissionCurrentYearTotal} (${vacationsRecap.permissionCurrentYearAccrued})</td>
        <!-- utilizzate -->
        <td>
		  #{if vacationsRecap.permissionUsed != 0 } 
           <a href="@{Vacations.permissionCurrentYear(vacationsRecap.year)}" data-async-modal="#defaultModal">
			${vacationsRecap.permissionUsed}
		  </a>
		  #{/if}
		  #{else} 0 #{/else}     
	    </td>
	    <!-- residue (maturate) -->
        <td>${vacationsRecap.permissionCurrentYearTotal - vacationsRecap.permissionUsed} 
           (${vacationsRecap.permissionCurrentYearAccrued - vacationsRecap.permissionUsed}) </td>
      </tr>
  	</table>
      
	#{/panel}      
    
    <div class="col-md-12">
	
	  <p>I <strong>Piani Ferie</strong> attualmente associati sono i seguenti:<br></p>
	     <table class="table center">
	    <tr class="info">
	      <th>Dal</th>
	      <th>Al</th>
	      <th>Valore</th>
	    </tr>
	    
	    #{list items: vacationsRecap.contract.vacationPeriods, as: 'vp'}
	    <tr>
	      <td>${vp.beginFrom.format()}</td>
	      <td>
	        #{if vp.endTo}${vp.endTo.format()}#{/if}#{else}<em>Indeterminato</em>#{/else}
	      </td>
	      <td>${vp.vacationCode.description}</td>
	    </tr>
	    #{/list}
	    
	    </table>
	  
		
    </div>
    #{/list}
</div>



