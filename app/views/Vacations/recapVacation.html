#{modalAsync title: vacationsRecap.person.fullname + ' - Riepilogo Ferie e Permessi' }

  
<div>
 *{
   #{tabs}
    
    #{tabItem id:'vacationLastYear', title:'Ferie del ' + (vacationsRecap.year-1), active:activeVacationLastYear /}
    #{tabItem id:'vacationCurrentYear', title:'Ferie del ' + vacationsRecap.year, active:activeVacationCurrentYear /}
    #{tabItem id:'permission', title:'Permessi del ' + vacationsRecap.year, active:activePermission /}
  
  #{/tabs}
  }*
  
  #{tabContent}
   
   <!--  ferie anno passato -->
   #{tabContentItem id:'vacationLastYear', active:activeVacationLastYear}
 
       #{panel title:'Ferie Usufruite Competenza ' + (vacationsRecap.year - 1) }
	      <div class="col-md-8 col-md-offset-2">
	        <table class="table table-condensed table-hover" datatable>
				    
			<thead>
			  <tr class="warning">
				 <th class="col-xs-4">Data</th>
			     <th class="col-xs-2">Codice</th>
			     <th class="col-xs-6">Descrizione</th>
			  </tr>
			</thead>
			<tbody>
			#{list items:vacationsRecap.listVacationLastYearUsed(), as:'absence'}
			    <tr>
			       <td data-order="${absence.personDay.date}">${absence.personDay.date.format()}</td>
			       <td>${absence.absenceType.code}</td>
			       <td>${absence.absenceType.description}</td>
			    </tr>
			#{/list}
			</tbody>
		    </table>
          </div>
	   #{/panel}
	   #{alert color:'info'}
	      <p>Totali: <strong>${vacationsRecap.vacationDaysLastYearAccrued}</strong></p>
	      <p>Usufruiti: <strong>${vacationsRecap.vacationDaysLastYearUsed}</strong></p>
	      <p>Rimanenti: <strong>${vacationsRecap.vacationDaysLastYearNotYetUsed }</strong> da utilizzare entro il <strong>${vacationsRecap.dateExpireLastYear.format()}</strong></p>
		  #{if vacationsRecap.sourceVacationLastYearUsed() > 0}
	        <div class="alert alert-success">
				<p>Per l'anno ${vacationsRecap.year - 1} sono stati definiti  
				<strong>${vacationsRecap.sourceVacationLastYearUsed()}</strong>
				giorni di ferie da inizializzazione ePAS.</p>
			</div>	
		  #{/if}
      #{/alert}
      
   #{/tabContentItem}
   
   <!--  ferie anno corrente -->
   #{tabContentItem id:'vacationCurrentYear', active:activeVacationCurrentYear}
 
      #{panel title:'Ferie Usufruite Competenza ' + (vacationsRecap.year) }
       
	  <table class="table table-condensed table-hover" datatable>
	   <thead>
	   <tr>
	     <th class="col-xs-4">Data</th>
	     <th class="col-xs-2">Codice</th>
	     <th class="col-xs-6">Descrizione</th>
	   </tr>
	   </thead>
	   <tbody>
	   #{list items:vacationsRecap.listVacationCurrentYearUsed(), as:'absence'}
	     <tr>
	       <td data-order="${absence.personDay.date}">${absence.personDay.date.format()}</td>
	       <td>${absence.absenceType.code}</td>
	       <td>${absence.absenceType.description}</td>
	     </tr>
	   #{/list}
	   </tbody>
	   </table>

     #{/panel}
     #{alert color:'info'}
	      <p>Totali: <strong>${vacationsRecap.vacationDaysCurrentYearTotal}</strong></p>
	      <p>Maturati:  <strong>${vacationsRecap.vacationDaysCurrentYearAccrued}</strong></p>
	      <p>Usufruiti: <strong>${vacationsRecap.vacationDaysCurrentYearUsed}</strong></p>
	      <p>Rimanenti: <strong>${vacationsRecap.vacationDaysCurrentYearTotal - vacationsRecap.vacationDaysCurrentYearUsed }</strong></p>
	      <p>Rimanenti maturati: <strong>${vacationsRecap.vacationDaysCurrentYearAccrued - vacationsRecap.vacationDaysCurrentYearUsed}</strong></p>
		  #{if vacationsRecap.sourceVacationCurrentYearUsed() > 0}
		     	<p>Sono stati definiti per l'anno ${vacationsRecap.year} 
				<strong>${vacationsRecap.sourceVacationCurrentYearUsed()}</strong>
				giorni di ferie da inizializzazione ePAS.</p>
		  #{/if}	
	  #{/alert}
  
      
   #{/tabContentItem}
   
   <!--  permessi -->
   #{tabContentItem id:'permission', active:activePermission}
   
        #{panel title:'Permessi Usufruiti Competenza ' + (vacationsRecap.year) }
	      <table class="table table-condensed table-hover" datatable>
		   <thead>
		   <tr>
		     <th class="col-xs-4">Data</th>
		     <th class="col-xs-2">Codice</th>
		     <th class="col-xs-6">Descrizione</th>
		   </tr>
		   </thead>
		   <tbody>
		   #{list items:vacationsRecap.listPermissionUsed(), as:'absence'}
		      <tr>
		       <td data-order="${absence.personDay.date}">${absence.personDay.date.format()}</td>
		       <td>${absence.absenceType.code}</td>
		       <td>${absence.absenceType.description}</td>
		      </tr>
		   #{/list}
		   </tbody>
		   </table>
		#{/panel}
		
		#{alert color:'info'}
	      <p>Totali: <strong>${vacationsRecap.permissionCurrentYearTotal}</strong></p>
	      <p>Maturati:  <strong>${vacationsRecap.permissionCurrentYearAccrued}</strong></p>
	      <p>Usufruiti: <strong>${vacationsRecap.permissionUsed}</strong></p>
	      <p>Rimanenti: <strong>${vacationsRecap.persmissionNotYetUsed }</strong> da utilizzare entro il <strong>${vacationsRecap.requestYearInterval.getEnd().format()}</strong></p>
	      <p>Rimanenti maturati: <strong>${vacationsRecap.permissionCurrentYearAccrued - vacationsRecap.permissionUsed}</strong></p>
		  #{if vacationsRecap.sourcePermissionUsed() > 0}
			<p>Sono stati definiti per l'anno ${vacationsRecap.year} 
		      <strong>${vacationsRecap.sourcePermissionUsed()}</strong>
			  giorni di permesso da inizializzazione ePAS.
			</p>
          #{/if}
        #{/alert}  
      
   #{/tabContentItem}
   
   #{if !vacationsRecap.postPartum.empty}
     #{alert color:'danger'}
       #{if activeVacationCurrentYear }
         <p>
            <strong>Periodo Contrattuale Ferie Anno Corrente ${vacationsRecap.year}</strong>: 
         	Dal ${vacationsRecap.requestYearInterval.begin} al ${vacationsRecap.requestYearInterval.end}
         </p>
         <p>
            <strong>Giorni Periodo Contrattuale</strong>: 
         </p>
         			sono state effettuate ${vacationsRecap.postPartum.size()} assenze
            post partum, che vanno ad influire sulla base dei giorni per il calcolo delle ferie totali.
         </p>
       #{/if}
     #{/alert}	  
   #{/if}
   
  #{/tabContent}

</div>          
 
#{/modalAsync}        

