<!DOCTYPE html>

<html>
    <head>
        <title>Istituto di Informatica e Telematica - Reperibilità di ${month} ${year}</title>
        <link rel="stylesheet" href="@{'/public/stylesheets/sistorgReportPDF.css'}" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="@{'/public/stylesheets/reperibilityPDF.css'}" type="text/css" charset="utf-8">
    </head>
    <body>
    		%{
    			mm = 0;
    			
       			mese = firstOfMonth.plusMonths(mm).monthOfYear().getAsText();
				anno = firstOfMonth.plusMonths(mm).year().getAsText();
    		}%
        	<h1>Istituto di Informatica e Telematica </h1>
        
        	<div class="table">
			<table class="mensile">
			<caption> Reperibilità del personale per il mese di ${mese} ${anno}</caption>
			<tr>
				<td class="no-border"></td><th colspan="2"> Feriali - Cod: ${codFr}</th> <th colspan="2" class="red"> Festivi - Cod: ${codFs}</th>
			</tr>
			<tr>
				<th>Nome dipendente  </th> <th> Date </th> <th> Num. giorni</th> <th> Date </th> <th>Num. giorni</th>
			</tr>
			
			%{
				for(person in reperibilitySumDays.rowKeySet()) {
			}%
			<tr>
				<td> ${person}</th>
				<td> 
					%{
						for(day in reperibilityDateDays.get(person, codFr)) {
					}%
						${day} <br/>
					%{
    					}
					}%
				</td>
				<td> ${reperibilitySumDays.contains(person, codFr) ? reperibilitySumDays.get(person, codFr) : '0'}</td>
				<td> %{
						for(day in reperibilityDateDays.get(person, codFs)) {
					}%
						${day} <br/>
					%{
    					}
					}%
				</td>
				<td class="red"> ${reperibilitySumDays.contains(person, codFs) ? reperibilitySumDays.get(person, codFs) : '0'}</td>
			</tr>

			%{
    			}
			}%
			</table>
      		</div>
      		
      		<div class="date">
      			<strong>Data</strong> &nbsp;&nbsp;${today.getDayOfMonth()}/${today.getMonthOfYear()}/${today.getYear()}
      		</div>
      		
      		<div class="firma dir">
      			<strong>Il Direttore</strong> <br />
      			Dott. Domenico Laforenza
      		</div>
      
     		<div class="firma resp">
      			<strong>Il Responsabile</strong><br />
      			Dott. Maurizio Martinelli
      		</div>
      		
     
			
			%{
				if (!inconsistentAbsence.isEmpty()) {
				
				fistTr = true;
			}%
					<div class="note_presenze">
					<h1>Inconsistenze con le presenze del personale </h1>
			    	<p>Sono state rilevate delle inconsistenze tra i turni di reperibilit&agrave; e le presenze del personale: </p>
			    	
			    	<table class="mensile">
			    		<tr>
			    		<th>Nome dipendente </th> <th>${thNoStampings}</th> <th>${thAbsences}</th>
			
			%{
					for(person in inconsistentAbsence.rowKeySet()) {
			}%
						<tr>
							<td>${person}</td>
			%{
							if (inconsistentAbsence.contains(person, thNoStampings)) {
			}%
							<td> 
			%{
								for(day in inconsistentAbsence.get(person, thNoStampings)) {
			}%
								${day} ${mese}<br/>
			%{
    							}
			}%
							</td>
			%{
		    				} else {
		    }%
		  					<td>&nbsp;</td>
		  	%{
		  					}
				
							if (inconsistentAbsence.contains(person, thAbsences)) {
			}%
							<td> 
			%{
								for(day in inconsistentAbsence.get(person, thAbsences)) {
			}%
								${day} ${mese}<br/>
			%{
    							}
			}%
							</td>
			%{
		    				} else {
		    }%
		  					<td>&nbsp;</td>
		  	%{
		  					}
		  	}%				
		    			</tr>
		    %{
		    		}
		  	}%
		  	
		  	</table>
						
      		</div>
      		
      		<div class="date">
      			<strong>Data</strong> &nbsp;&nbsp;${today.getDayOfMonth()}/${today.getMonthOfYear()}/${today.getYear()}
      		</div>
      		
		  	%{
		    	}						
			}%
					

      		
    </body>
</html>