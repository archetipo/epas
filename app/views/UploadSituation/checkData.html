#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title: 'ePAS - Invio Attestati'  /}

<div class="container">
#{title title:'ePAS - Supporto per Invio Attestati', administration:true /}
</div>

#{uploadSituation.uploadSituationTabs activeAction:'checkData' /}

<div class="container">
	
  
	#{form @UploadSituation.checkData(), class:'form-horizontal'}
		
		#{alert color:'info'}
		<p>Utilizzare questa procedura per generare un file contenente le informazioni 
		da caricare in <strong>CNR Attestati</strong>.
		</p>
		<p>Scegli <strong>anno</strong> e <strong>mese</strong> di assenze e competenze per i quali vuoi popolare
		 il file da inviare agli attestati di presenza.</p>
		#{/alert}

        #{f.selectModel 'office', items:templateUtility.officesAllowed(), value:wrOffice.value /}

		#{f.selectEnum 'year', label:'Anno Attestato', items:wrOffice.yearUploadable, value:year, byEquals:true /} 
		#{f.selectEnum 'month', label:'Mese Attestato', items:wrOffice.monthUploadable, value:month, byEquals:true /}	

		<br>
		#{b.buttons center:true}
            *{ #{b.cancel @updateSourceContract(contract.id) /} }*
            #{b.submit 'Crea File'/}
          #{/b.buttons}
	#{/form}
	
	<table class="table table-condensed table-bordered table-striped">
	  <tr>
	    <th>Dipendente</th>
	    <th>Assenze</th>
	    <th>Competenze</th>
	    <th>Ore Formazione</th>
	    <th>Buoni Pasto</th>
	  </tr>
	#{list items:results, as:'result'}
	  <tr>
	    <td>${result.dipendente.cognomeNome}</td>
	    <td>${result.absencesSent}</td>
	    <td>${result.competencesSent}</td>
	    <td>${result.trainingHoursSent}</td>
	    <td>${result.mealTicketSent}</td>
	  </tr>
	#{/list}
	</table>
</div>
