<td class="assenza default-single">
  #{secure.link @AbsenceGroups.insert(dayRecap.personDay.person.id, dayRecap.personDay.date?.format()),
      target:person, display:'hidden', 'data-async-modal':'#modalGroupAbsence'}
      ___
  #{/secure.link}

  #{list items:dayRecap.personDay.absences, as:'absence'}


  #{secure.link @Absences.edit('absence.id':absence.id), target: absence, 'data-async-modal':'#modalAbsence'}
    <span 
        #{if absence.nothingJustified()} class="text-muted" #{/if} 
        #{if !absence.troubles.empty} <i class="fa fa-bomb" aria-hidden="true"></i>#{/if}
        webui-popover-hover data-url="#${absence.id}">
	    ${absence.absenceType.code}<br>
	  </span>
  #{/secure.link}

  #{if absence.absenceFile.exists()}
    #{secure.link @Absences.downloadAttachment(absence.id), fa:'paperclip'}#{/secure.link}
  #{/if}

  <div class="webui-popover-content" id="${absence.id}">
    <strong>Codice</strong> ${absence.absenceType.code}<br>
    <strong>Descrizione</strong> ${absence.absenceType.description}
    
    #{if absence.justifiedType}
        #{if absence.justifiedAllDay() }
          <br><strong>Tempo giustificato</strong> &{absence.justifiedType}
        #{/if}
	    #{if absence.justifiedTime() }
	      <br><strong>Tempo giustificato</strong> ${absence.justifiedTime().printHourMinute()}
	    #{/if}
    #{/if}
  </div>

  #{/list}
</td>