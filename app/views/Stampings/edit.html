#{modalAsync id:'modalStamping', button:'Salva', 
  title:('Modifica timbratura ' + stamping.personDay.date.format() 
           + ' per ' + stamping.personDay.person.fullname) }
  #{if stamping.persistent}
    <div class="alert alert-success center">Modifica i dati della timbratura delle ore ${stamping.time}</div>
  #{/if}
  #{else}
    <div class="alert alert-success center">Inserisci i dati della nuova timbratura.</div>
  #{/else}
  <div id="stampingData">    
	#{form action:@save(), method:'POST', autocomplete:false, 'data-async':'#personStamping',
	    class:'form form-horizontal', 'data-async-error':'#stampingData'}
	    
        <input type="hidden" name="stamping.id" value="${stamping.id}"/>

		#{f.hidden 'person.id', value:stamping.personDay.person.id /}
		#{f.hidden 'date', value:stamping.personDay.date.format() /}
		#{if stamping.persistent}
			#{f.input 'time', popover:'true', value:stamping.time/}
			#{f.booleanRadio 'way', true:'Ingresso', false:'Uscita', value:stamping.booleanWay /}
		#{/if}#{else}
		    #{f.input 'time', popover:'true' /}
		    #{f.booleanRadio 'way', true:'Ingresso', false:'Uscita' /}
		#{/else}	

		#{include './_inputStampType.html' /}
		
		#{f.input 'stamping.note' /}

      
     #{b.buttons center:true}   

      #{if stamping.persistent}
        #{b.submit 'Aggiorna'/}
      #{/if}    
      #{else}
        #{b.submit 'Inserisci'/}
      #{/else}

     #{/b.buttons}

	#{/form}
	
	#{if stamping.persistent}
	<div class="center">
	#{accordionGroup 'delete'}
     #{accordionItem 'deleteItem', parent:'delete', title:'Eliminare questa timbratura delle ' + stamping.time, open:false, color:'danger'}
	  <div class="text-danger center">
	    E' possibile eliminare questa timbratura. 
		<a class="btn btn-danger" href=@{delete(stamping.id)}><i class="fa fa-trash"></i>Elimina</a> 
	  </div>
     #{/accordionItem}
    #{/accordionGroup } 
    </div> 
	#{/if}
  </div>
#{/modalAsync}
