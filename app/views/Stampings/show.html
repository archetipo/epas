#{extends 'main.html' /}
#{set title:monthRecap.person.surname + ' ' + monthRecap.person.name + ', matricola=' + monthRecap.person.number /}

<h2>Situazione presenze mensile <span class="capitalized">&{'views.tags.display.date.month.' + monthRecap.month}</span> ${monthRecap.year}</h2>
<table id="presenze_mensili">
	<tr>
		<th width="5%">Buono mensa</th>
		<th>Giorno</th>
		<th>Codice di assenza</th>
		<th>1째 entrata</th>
		<th>1째 uscita</th>
		<th>2째 entrata</th>
		<th>2째 uscita</th>
		<th>tempo</th>
		<th>differ.</th>
		<th>progress</th>
		<th>tipo orario</th>
	</tr>
	
%{
     for(day in monthRecap.days) {
}%
		<tr>
			<td>&{'views.common.yes_or_no.' + day.mealTicket()}</td>
			<td class="capitalized">${String.format(messages.get('views.tags.display.date.format.dayAndShortDayName'), day.date.toDate())}</td>
			<td>
				%{for (absenceType in day.absenceList()) {
					absenceType.code
				  }
				}%
			</td>
			<td>${day.getStampings().size()>0 ? day.getStampings().get(0) : ''}</td>
			<td>${day.getStampings().size()>1 ? day.getStampings().get(1) : ''}</td>
			<td>${day.getStampings().size()>2 ? day.getStampings().get(2) : ''}</td>
			<td>${day.getStampings().size()>3 ? day.getStampings().get(3) : ''}</td>
			<td>${String.format("%02d", (day.timeAtWork()/60).toInteger())}:${day.timeAtWork()%60}</td>
			<td>${day.difference}</td>
			<td>${day.progressive()}</td>			
			<td>${day.person.workingTimeType != null ? day.person.workingTimeType.description : ''}</td>
		</tr>
%{  		   
     }
     
}%

*{Significato codici assenza}*
</table>