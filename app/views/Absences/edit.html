#{extends 'main.html' /}
#{set title:absence.personDay.person.surname + ' ' + absence.personDay.person.name + ', matricola=' + absence.personDay.person.number /}

<h3>Modifica codici di assenza del ${absence.personDay.date.toDateTime()}</h3>

#{form @Absences.update()}
	

	<input type="hidden" name="absenceId" value="${absence.id}"/>
	<input type="hidden" name="date" value="${absence.personDay.date}"/>
	<input type="hidden" name="person" value="${absence.personDay.person}"/>


<table>
	<tr>
		<th>Codice da inserire</th>
		<th>Codici</th>
	</tr>
	<tr>
		<td><input name="absenceCode" type="text" value="${absence.absenceType.code}" size="20" maxlength="100" /></td>	
		<td>		
			#{select 'code', value: '', id:'assenzaFrequente'}
			<option value="">Codici più usati</option>
			%{ 
				for(absenceType in frequentAbsenceTypeList){
			}%
			#{option absenceType.code}${absenceType.code} ${absenceType.getShortDescription()}#{/option}
			%{
				}
			}%
			#{/select}
							
			#{select 'code', value: '', id:'tuttiCodici'}
			<option value="">Tutti i codici</option>
			%{ 
				for(absenceType in allCodes){
			}%
			#{option absenceType.code}${absenceType.code} ${absenceType.getShortDescription()}#{/option}
			%{
				}
			}%
			#{/select}		
		</td>	
	</tr>
</table>


<fieldset>
	<legend>Buono mensa:</legend>
	  	calcolato<input type="radio" name="buonoMensaCalcolato" value="true" checked="checked"/>
	  	No <input type="radio" name="buonoMensaNo" value="true"/>
	  	Sì <input type="radio" name="buonoMensaSi" value="true"/>
</fieldset>

<!-- Qui bisogna inserire un modo per uploadare i file da filesystem contenenti i permessi per eventuali  -->

<p id="allegaFile">
Allega il file contenente la dichiarazione di assenza:<br>
<input type="file" name="datasize" size="30">
</p>

<input type="submit" value="Aggiorna"/>
#{/form}