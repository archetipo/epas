#{extends 'main.html' /}
#{logoutForm /}

<h3 id="inserimentoNuovoCodiceAssenza">Modifica dati per codice di assenza: ${abt.code} (${abt.description})</h3>
#{form @Absences.updateCode()}
<div>
<input type="hidden" name="absenceTypeId" value="${abt.id}"/>
<form class="form-horizontal">
<fieldset>
<legend>Codice di assenza</legend>
<p id="codice">Codice: <input id="absenceTypeCodice" type="text" name="codice" value="${abt.code}" disabled="disabled"/></p> 
<p id="codice">Codice per attestati di presenza: <input id="absenceTypeCodiceSost" type="text" name="codicePresenza" value="${abt.certificateCode}" disabled="disabled"/></p></p>
<p id="codice">Descrizione: <input id="absenceTypeDescrizione" type="text" name="descrizione" value="${abt.description}" size="100"/></p></p>
<div id="frm">
<p>Uso interno:
%{	if(abt.internalUse == false){
}%		<p id="sino">Sì <input type="radio" name="usoInterno" value="true" /> 
		No <input type="radio" name="usoInterno" value="false" checked="checked"/></p>
%{
	}else{
}%		<p id="sino">Sì <input type="radio" name="usoInterno" value="true" checked="checked"/> 
		No <input type="radio" name="usoInterno" value="false"/></p>
%{
	}
	
}%
 
</p>
</div>
<div id="frm">
<p>Uso multiplo: %{	if(abt.multipleUse == false){
}%		<p id="sino">Sì <input type="radio" name="usoMultiplo" value="true" /> 
		No <input type="radio" name="usoMultiplo" value="false" checked="checked"/></p>
%{
	}else{
}%		<p id="sino">Sì <input type="radio" name="usoMultiplo" value="true" checked="checked"/> 
		No <input type="radio" name="usoMultiplo" value="false"/></p>
%{
	}
	
}%
</p>
</div>
<p id="codice">Inizio validita': <input id="absenceTypeInizioValidita" type="date" name="inizio" value="${abt.validFrom}" /></p>
<p id="codice">Fine validita': <input id="absenceTypeFineValidita" type="date" name="fine" value="${abt.validTo}" /></p>

<p id="codice">Tempo di lavoro giustificato: #{select 'abt.justifiedTimeAtWork', value:abt.justifiedTimeAtWork.description, id:'tempoGiustificato'}
									#{option null}#{/option}
									#{option justList.get(0).description}${justList.get(0).description}#{/option}
									#{option justList.get(1).description}${justList.get(1).description}#{/option}
									#{option justList.get(2).description}${justList.get(2).description}#{/option}
									#{option justList.get(3).description}${justList.get(3).description}#{/option}
									#{option justList.get(4).description}${justList.get(4).description}#{/option}
									#{option justList.get(5).description}${justList.get(5).description}#{/option}
									#{option justList.get(6).description}${justList.get(6).description}#{/option}
									#{option justList.get(7).description}${justList.get(7).description}#{/option}
									#{option justList.get(8).description}${justList.get(8).description}#{/option}
									#{option justList.get(9).description}${justList.get(9).description}#{/option}
									#{option justList.get(10).description}${justList.get(10).description}#{/option}
									#{option justList.get(11).description}${justList.get(11).description}#{/option}
									#{option justList.get(12).description}${justList.get(12).description}#{/option}								
									#{/select}</p>

<p id="livelli">Livelli: 
			%{	for(qual in qualList){
				if(abt.qualifications.contains(qual)){
				}%
						${qual.qualification}: <input id="qualifica" type="checkbox" name="qualification${qual.qualification}" value ="si" checked="checked"/>
				%{
					}else{
				}%
						${qual.qualification}: <input type="checkbox" name="qualification${qual.qualification}" value ="no"/>
				%{
					}
				}
			}%		
</p>

<div id="frm">
<p id="codice">Calcola buono pasto: %{	if(abt.mealTicketCalculation == false){
}%		<p id="sinoBuono">Sì <input type="radio" name="calcolaBuonoPasto" value="true" /> 
		No <input type="radio" name="calcolaBuonoPasto" value="false" checked="checked"/></p>
%{
	}else{
}%		<p id="sinoBuono">Sì <input type="radio" name="calcolaBuonoPasto" value="true" checked="checked"/> 
		No <input type="radio" name="calcolaBuonoPasto" value="false"/></p>
%{
	}
	
}%
</p>
</div>
<div id="frm">
<p id="codice">Ignora timbrature: %{	if(abt.ignoreStamping == false){
}%		<p id="sinoTimbrature">Sì <input type="radio" name="ignoraTimbrature" value="true" /> 
		No <input type="radio" name="ignoraTimbrature" value="false" checked="checked"/></p>
%{
	}else{
}%		<p id="sinoTimbrature">Sì <input type="radio" name="ignoraTimbrature" value="true" checked="checked"/> 
		No <input type="radio" name="ignoraTimbrature" value="false"/></p>
%{
	}
	
}%
</p>
</div>
<p id="livelli">Gruppo: 
%{	if(abt.absenceTypeGroup != null){
}%		<input id="gruppo" type="text" name="gruppo" value="${abt.absenceTypeGroup.label}"/>
%{
	}else{
}%	
		<input id="gruppo" type="text" name="gruppo" value=""/>
%{
	}
}%
</p>
</fieldset>
</form>

<fieldset>
<legend>Da riempire in caso di gruppo valorizzato</legend>
<!--  <p>Valore:</p> -->
<p id="codice">Minuti in eccesso: 
%{	if(abt.absenceTypeGroup != null){
}%		<input id="minutiEccesso" type="text" name="minutiEccesso" value="${abt.absenceTypeGroup.minutesExcess}"/>
%{
	}else{
}%	
		<input id="minutiEccesso" type="text" name="minutiEccesso" value="" disabled="disabled"/>
%{
	}
}%
</p>
<p id="codice">Accumulare i valori:
%{	if(abt.absenceTypeGroup != null){
}%
	#{select 'abt.absenceTypeGroup.accumulationType', value:abt.absenceTypeGroup.accumulationType.description, id:'tipoAccumulo'}
		#{option accType.get(0).description}${accType.get(0).description}#{/option}
		#{option accType.get(1).description}${accType.get(1).description}#{/option}
		#{option accType.get(2).description}${accType.get(2).description}#{/option}
		#{option accType.get(3).description}${accType.get(3).description}#{/option}
	#{/select}
%{
	}else{
}%
	#{select 'abt.absenceTypeGroup.accumulationType', id:'tipoAccumulo', disabled:disabled}
		#{option accType.get(0).description}${accType.get(0).description}#{/option}
		#{option accType.get(1).description}${accType.get(1).description}#{/option}
		#{option accType.get(2).description}${accType.get(2).description}#{/option}
		#{option accType.get(3).description}${accType.get(3).description}#{/option}
	#{/select}
%{
	}
}%
</p>
<p id="limiteAccumulo">Limite accumulo:
%{	if(abt.absenceTypeGroup != null){
}%		<input id="limiteAccumulo" type="number" name="limiteAccumulo" value="${abt.absenceTypeGroup.limitInMinute}"/>
%{
	}else{
}%	
		<input id="limiteAccumulo" type="number" name="limiteAccumulo" value="" disabled="disabled"/>
%{
	}
}%
</p>
<p id="codice">Cosa fare raggiunto il limite:
%{	if(abt.absenceTypeGroup != null){
}%
	#{select 'abt.absenceTypeGroup.accumulationBehaviour', value:abt.absenceTypeGroup.accumulationBehaviour.description, id:'comportamentoAccumulo'}
		#{option behaviourType.get(0).description}${behaviourType.get(0).description}#{/option}
		#{option behaviourType.get(1).description}${behaviourType.get(1).description}#{/option}
		#{option behaviourType.get(2).description}${behaviourType.get(2).description}#{/option}
		
	#{/select}
%{
	}else{
}%
	#{select 'abt.absenceTypeGroup.accumulationBehaviour', id:'comportamentoAccumulo', disabled:disabled}
		#{option behaviourType.get(0).description}${behaviourType.get(0).description}#{/option}
		#{option behaviourType.get(1).description}${behaviourType.get(1).description}#{/option}
		#{option behaviourType.get(2).description}${behaviourType.get(2).description}#{/option}
		
	#{/select}
%{
	}
}%
</p>
<p id="codiceSost">Codice per sostituzione:
%{	if(abt.absenceTypeGroup != null){
}%		<input id="codiceSostituzione" type="text" name="codiceSostituzione" value="${abt.absenceTypeGroup.replacingAbsenceType.code}"/>
%{
	}else{
}%	
		<input id="codiceSostituzione" type="text" name="codiceSostituzione" value="" disabled="disabled"/>
%{
	}
}%
</p>
</fieldset>
</div>

<div id="frm">
<input id="updateAbsenceCode" type="submit" value="Modifica"/>
#{/form}
<input id = "indietroAbsenceList" action="action" type="button" value="Indietro" onclick="history.go(-1);" />
</div>
