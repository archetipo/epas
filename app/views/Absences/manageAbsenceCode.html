#{extends 'main.html' /}
#{set header:'navbar' /}
#{set title:'ePAS - Codici di assenza' /}

#{secure.check 'Absences.insertCode' }
<div class="row text-center">
	#{secure.link @Absences.insertCode(), class:'btn btn-primary',fa:'plus' }
		<em>Definisci nuovo codice di assenza</em>
	#{/secure.link}
</div>
#{/secure.check}


	<table class="table table-striped table-hover" width="100%" datatable>
	 <thead>
	  <tr>
	  	<th>&{'absenceType.code'}</th>
	  	<th>&{'absenceType.certificateCode'}</th>
	  	<th>&{'absenceType.description'}</th>
	  	<th>&{'absenceType.internalUse'}</th>
	  	<th>&{'absenceType.consideredWeekEnd'}</th>
	  	<th>&{'absenceType.validFrom'}</th>
	  	<th>&{'absenceType.validTo'}</th>
	  	<th>&{'absenceType.justifiedTimeAtWork'}</th>
	  	<th>&{'absenceType.qualifications'}</th>
	  </tr>
	</thead>
	<tbody>
		#{list absenceTypes}
		<tr>
			<td>#{secure.link @Absences.editCode(_.id)}${_.code}#{/secure.link}</td>
			<td>${_.certificateCode}</td>
			<td>${_.description}</td>
			<td>${_.internalUse ? 'Sì' : 'No'}</td>
	
			<td>${_.consideredWeekEnd ? 'Sì' : 'No'}</td>
			<td>${_.validFrom?.format()}</td>
			<td>${_.validTo?.format()}</td>
			<td>${_.justifiedTimeAtWork?.label()}</td>
			<td>
				#{list items:_.qualifications, as: 'q'}
					${q.qualification}#{if !q_isLast},#{/if}
				#{/list}
			</td> 
		</tr>
		#{/list}
		</tbody>
	</table>
