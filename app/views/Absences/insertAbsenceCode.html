#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title:'ePAS - Inserisci nuovo codice di assenza' /}

<div class="container">
#{form @Absences.saveAbsenceCode()}
	<div class="panel panel-default">
		  <div class="panel-heading">
		    <h3 class="panel-title">Nuovo codice di assenza</h3>
		  </div>
		<div class="panel-body">
			<table class="table table-form table-condensed table-hover">
				<tr>
					<td>Codice: </td>
					<td><input type="text" name="absenceType.code"></td>
					<td>codice di assenza</td>
				</tr>
 				<tr>
 					<td>Codice per attestati di presenza: </td>
 					<td><input type="text" name="absenceType.certificateCode"></td>
 					<td>Usare solo se il codice che deve andare negli attestati di presenza e' diverso da quello definito nella riga precedente (questo diventa il codice vero e quello sulla riga precedente un alias per uso interno)</td>
 				</tr>
				<tr>
					<td>Descrizione: </td>
					<td><input type="text" name="absenceType.description"></td>
					<td>Descrizione codice di assenza</td>
				</tr>
				<tr>
					<td>Uso interno:</td>
					<td>
						Sì <input type="radio" name="absenceType.internalUse" value="true"> 
						No <input type="radio" name="absenceType.internalUse" value="false">
					</td>
					<td>Seleziona "si" se il codice è solo per uso interno (non previsto dal CNR) non sarà trasferito negli attestati di presenza</td>
				</tr>
				
				<tr>
					<td>Inizio validita':</td>
					<td><input type="text" name="absenceType.validFrom" datepicker-year></td>
					<td>Data inizio validità di questo codice (se vuoto valido da sempre)</td>
				</tr>
				<tr>
					<td>Fine validita': </td>
					<td><input type="text" name="absenceType.validTo" datepicker-year></td>
					<td>Data fine validità di questo codice (se vuoto valido per sempre)</td>
				</tr>
				<tr>
					<td>Tempo di lavoro giustificato: </td>
					<td>
					#{select 'justifiedTimeAtWork'}
						#{list items:justifiedTimeAtWorkList, as: 'jtw'}
							#{option jtw.description}${jtw.description}#{/option}
						#{/list}
					#{/select}
					</td>
					<td>Tempo di lavoro giustificato (Es. codice 661h2 indicare 2)</td>
				</tr>
				<tr>
					<td>Utilizzabile per le categorie:</td>
					<td>
						<input name="tecnologi" type="checkbox"> Tecnologi (lv 1-3)<br>
						<input name="tecnici" type="checkbox"> Tecnici (lv 4-10)
					</td>
					<td>livelli CNR per i quali può essere usato questo codice</td>
				</tr>
				<tr>
					<td>Inseribile anche nei week end e festivi:</td>
					<td>
						Sì <input type="radio" name="absenceType.consideredWeekEnd" value="true"> 
						No <input type="radio" name="absenceType.consideredWeekEnd" value="false" checked>
					</td>
					<td>Seleziona "si" se il codice può essere inserito anche nel week end e nei festivi</td>
				</tr>
				<tr>
					<td>Gruppo:</td>
					<td>
						<input type="text" name="absenceTypeGroup.label">
					</td>
					<td><br>Nome che raggruppa più codici che devono essere gestiti insieme per gli accumuli 
					<br>(Es. i codici 661h1,661h2,661h3,.. possono essere assegnati a un gruppo 661hx in modo da poter accumulare i valori e controllare il tetto)</td>
				</tr>
			</table>
		</div>
	</div> 

	<div class="panel panel-default">
		  <div class="panel-heading">
		    <h3 class="panel-title">Da riempire in caso di gruppo valorizzato</h3>
		  </div>
		<div class="panel-body">
		
			<table class="table table-form table-condensed table-hover">
				
				<tr>
					<td>Accumulare i valori:</td>
					<td>
						#{select 'accType'}
							#{list items:accumulationTypeList, as: 'accType'}
								#{option accType.description}${accType.description}#{/option}
							#{/list}
						#{/select}						
					</td>
					<td>Se i valori devono essere sommati per ogni utilizzo. Alla fine del periodo (mese o anno) l'accumulo riparte da zero. (Es. codice 661h2 indicare "Annuale")</td>
				</tr>
				<tr>
					<td>Limite accumulo:</td>
					<td>
						<input type="number" name="absenceTypeGroup.limitInMinute">
					</td>
					<td>Valore massimo accumulo, raggiunto il quale deve comportarsi come specificato nella definizione successiva (Es. codice 661h2 indicare 18)</td>
				</tr>
				<tr>
					<td>Minuti in Eccesso:</td>
					<td>
						Sì <input type="radio" name="absenceTypeGroup.minutesExcess" value="true"> 
						No <input type="radio" name="absenceTypeGroup.minutesExcess" value="false" checked>
					</td>
					<td>Se selezionato, consente di giustificare anche gli eventuali minuti in eccesso mancanti al totale dell'orario di lavoro giornaliero: es.: se il mio orario di lavoro prevede un orario giornaliero di 7 ore e 12 e prendo un codice di assenza che giustifica 7 ore e quel codice ha il campo minuti in eccesso = si, allora il sistema calcolerà 7 ore e 12 di giustificazione invece di 7</td>
				</tr>
				<tr>
					<td>Cosa fare raggiunto il limite:</td>
					<td>	
						#{select 'accBehaviour'}
							#{list items:accumulationBehaviourList, as: 'accBehaviour'}
								#{option accBehaviour.description}${accBehaviour.description}#{/option}
							#{/list}															
						#{/select}						
					</td>
					<td>Comportamento da tenere al raggiungimento del limite (Es. codice 661h2 selezionere "Non accetta ...")</td>
				</tr>
				<tr>
					<td>Codice per sostituzione:</td>
					<td>
						<input type="text" name="codiceSostituzione">
					</td>
					<td>Codice di assenza da sostituire quando nella definizione precedente si è selezionato "sostituisci ..." 
			(Es. si potrebbe definire un codice ad uso interno per mezza giornata di ferie usando: valore=1, quantità giustificata= mezza giornata, accumulare i valori=sempre,limite=2, cosa fare=sostituisci questo campo=32)</td>
				</tr>
			</table>
		</div>
	</div>
	<div class="container-fluid center">
      <input class="btn btn-primary" type="submit" value="Ok">  
      <input class="btn inputinline" id="indietroAbsenceList" action="action" type="button" value="Indietro" onclick="history.go(-1);">    
	</div>

#{/form}
</div>