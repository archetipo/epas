#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title:'ePAS - Inserisci nuovo codice di assenza' /}
<div class="container">
#{form @Absences.saveAbsenceCode()}


	<div class="panel panel-default">
		  <div class="panel-heading">
		    <h3 class="panel-title">Nuovo codice di assenza</h3>
		  </div>
		<div class="panel-body">
			<table class="table table-form table-condensed table-hover">
				<tr>
					<td><p>Codice: </p></td>
					<td><input type="text" name="codice"  /></td>
					<td>codice di assenza</td>
				</tr>
 				<tr>
 					<td><p>Codice per attestati di presenza: </p></td>
 					<td><input type="text" name="codicePresenza"  /></td>
 					<td>Usare solo se il codice che deve andare negli attestati di presenza e' diverso da quello definito nella riga precedente (questo diventa il codice vero e quello sulla riga precedente un alias per uso interno)</td>
 				</tr>
				<tr>
					<td><p>Descrizione: </p></td>
					<td><input type="text" name="descrizione"/></td>
					<td>Descrizione codice di assenza</td>
				</tr>
				<tr>
					<td><p>Uso interno:</p></td>
					<td>
					
						<p>Sì <input type="radio" name="usoInterno" value="true" /> 
						No <input type="radio" name="usoInterno" value="false" /></p>

					
					</td>
					<td>Seleziona "si" se il codice è solo per uso interno (non previsto dal CNR) non sarà trasferito negli attestati di presenza</td>
				</tr>
				
				<tr>
					<td><p >Inizio validita': </p></td>
					<td><input type="text" name="inizio"  id="datepicker1" data-date-format="yyyy-mm-dd"/></td>
					<td>Data inizio validità di questo codice nel formato aaa/mm/gg (se vuoto valido da sempre)	</td>
				</tr>
				<tr>
					<td><p >Fine validita': </p></td>
					<td><input type="text" name="fine"  id="datepicker1" data-date-format="yyyy-mm-dd"/></td>
					<td>Data fine validità di questo codice nel formato aaa/mm/gg (se vuoto valido per sempre)	</td>
				</tr>
				<tr>
					<td><p id="codice">Tempo di lavoro giustificato: </p></td>
					<td>
					#{select 'jwt', id:'jwt.id'}
						#{list items:justifiedTimeAtWorkList, as: 'jwt' }
							#{option jwt.description}${jwt.description}#{/option}
						#{/list}
					#{/select}
					</td>
					<td>Tempo di lavoro giustificato (Es. codice 661h2 indicare 2)</td>
				</tr>
				<tr>
					<td><p>Livelli:</p></td>
					<td>
					#{select 'qual', value:qual , id:'qual.id'}
						#{list items:qualificationList, as:'qual'}
							#{option qual}${qual.qualification}#{/option}
						#{/list}
					#{/select}
					</td>
					<td>livelli CNR per i quali può essere usato questo codice</td>
				</tr>
				
				<tr>
					<td><p>Gruppo:</td>
					<td>
					
						<input type="text" name="gruppo" />
					
					</td>
					<td><br>Nome che raggruppa più codici che devono essere gestiti insieme per gli accumuli 
			<br>(Es. i codici 661h1,661h2,661h3,.. possono essere assegnati a un gruppo 661hx in modo da poter accumulare i valori e controllare il tetto)</td>
				</tr>
				<tr>
					<td>Inseribile anche nei week end e festivi:</td>
					<td>
					
						<p>Sì <input type="radio" name="weekEnd" value="true" /> 
						No <input type="radio" name="weekEnd" value="false" checked="checked"/></p>
					
					</td>
					<td>Seleziona "si" se il codice può essere inserito anche nel week end e nei festivi</td>
				</tr>
			</table>
				
		</div>
	</div> 

	<div class="panel panel-default">
		  <div class="panel-heading">
		    <h3 class="panel-title">Da riempire in caso di gruppo valorizzato</h3>
		  </div>
		<div class="panel-body">
		
			<table class="table table-form table-condensed table-hover">
				
				<tr>
					<td><p>Accumulare i valori:</p></td>
					<td>
						#{select 'type', value:qual , id:'qual.id'}
							#{list items:accumulationTypeList, as: 'type'}
								#{option type.description}${type.description}#{/option}
							#{/list}
						#{/select}						
					</td>
					<td>Se i valori devono essere sommati per ogni utilizzo. Alla fine del periodo (mese o anno) l'accumulo riparte da zero. (Es. codice 661h2 indicare "Annuale")</td>
				</tr>
				<tr>
					<td><p>Limite accumulo:</p></td>
					<td>
							<input type="number" name="limiteAccumulo" />
						
					</td>
					<td>Valore massimo accumulo, raggiuntio il quale deve comportarsi come specificato nella definizione successiva (Es. codice 661h2 indicare 18)</td>
				</tr>
				<tr>
					<td><p>Cosa fare raggiunto il limite:</p></td>
					<td>	
						#{select 'acc', value:acc, id:'acc.id'}
							#{list items:accumulationBehaviourList, as: 'acc'}
								#{option acc.description}${acc.description}#{/option}
							#{/list}															
						#{/select}						
					</td>
					<td>Comportamento da tenere al raggiungimento del limite (Es. codice 661h2 selezionere "Non accetta ...")</td>
				</tr>
				<tr>
					<td><p>Codice per sostituzione:</p></td>
					<td>
						<input type="text" name="codiceSostituzione" />
					</td>
					<td>Codice di assenza da sostituire quando nella definizione precedente si è selezionato "sostituisci ..." 
			(Es. si potrebbe definire un codice ad uso interno per mezza giornata di ferie usando: valore=1, quantità giustificata= mezza giornata, accumulare i valori=sempre,limite=2, cosa fare=sostituisci questo campo=32)</td>
				</tr>
			</table>
		</div>
	</div>
	<div class="container-fluid center">
      <input class="btn btn-primary" type="submit" value="Ok" />  
      <input class="btn inputinline" id="indietroAbsenceList" action="action" type="button" value="Indietro" onclick="history.go(-1);" />    
	</div>

#{/form}
</div>


	
