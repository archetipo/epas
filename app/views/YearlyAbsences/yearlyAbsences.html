#{extends 'main.html' /}
#{set title:yearlyAbsencesRecap.person.surname + ' ' + yearlyAbsencesRecap.person.name + ', matricola=' + yearlyAbsencesRecap.person.number /}

<h2 id="titoloSituazioneAssenzeAnnuali">Situazione assenze per l'anno ${yearlyAbsencesRecap.year} di ${yearlyAbsencesRecap.person.name} ${yearlyAbsencesRecap.person.surname}</h2>

#{logoutForm /}

#{functionalMenuForm mainMenu: mainMenu /} 

<table id="assenze_annuali">

	<!--  Riga di intestazione -->
	<tr>
		<th rowspan="2">Mese</th>
		<th class="giorni"colspan="31">Giorni</th>
		</tr>
		%{
			int i=1;
			while(i<=31){
		}%
		
			<th class="giorni">${i}</th>
		%{
				i++;
			}
		}%

	<!-- Contenuto tabella assenze annuali -->

	%{  
		for(month in yearlyAbsencesRecap.absenceTable.rowMap()){
	}%
	<tr>
		
		<td class="mese"><span class="capitalized">${yearlyAbsencesRecap.fromIntToStringMonth( month.getKey() )}</td>
		%{
			for(col in yearlyAbsencesRecap.absenceTable.columnKeySet()) {   				
		}%
            <td>${month.getValue().get(col)}</td>
        %{
              		
           	}
        }%
	</tr>
	%{
		}
	}%
	
	
	
	
	
</table>


<table id="Codici di assenza">
	<tr>
		<th width="80">Codice assenza</th>
		<th width="200">Descrizione</th>
		<th width="20">Totale</th>			
	</tr>
%{
     for( entry in yearlyAbsencesRecap.absenceSummary.entrySet() ) {
}%
	<tr>
		<td>${entry.getKey().code}</td>     
		<td>${entry.getKey().description}</td>	
		<td>${entry.getValue()}</td>
	</tr>

%{  		   
     }
     
}%
	<tr>
		<td>TOTALE</td>
		<td></td>
		<td>${yearlyAbsencesRecap.totalAbsence}</td>
	</tr>
</table>
