#{extends 'main_admin_no_menu.html' /}

#{if month != 0}
  #{set titolo: 'Situazione generale delle assenze per ciascun dipendente nel mese di ' + month_capitalized + ' ' + year /}
#{/if}
#{else}
  #{set titolo: 'Situazione assenze per ciascun dipendente da inizio anno' /}
#{/else}

<br>
<div class="row">
<div class="container">
#{form action:@YearlyAbsences.showGeneralMonthlyAbsences(), class:'form', 
    method:'GET', autocomplete:'off',
    'data-reload':'#results'}
    
    <input type="text" name="name" placeholder="Nome o cognome" value="${name}"class="input-medium search-query"/>
    <i class="icon-search icon-large"></i>
	<input type="hidden" name="year" value="${year}"/>
	<input type="hidden" name="month" value="${month}"/>
#{/form}
</div>
</div>

<div class="row">
<div class="container">
<section id="results">
<table class="table table-hover custom2 span11" style="margin-left: 0px;">
	<tr>
		<th rowspan="2">Nome</th>
		<th colspan="${numberOfDifferentAbsenceType}">Codici di assenza</th>
		
	</tr>
	%{  
	for(col in tableMonthlyAbsences.columnKeySet()){
	}%
		<th>${col.code}</th>
	%{
	}
	}%
	
	
	%{  
	for(entry in tableMonthlyAbsences.rowMap().entrySet()){
	}%
	<tr>
		<td class="caratteristica">${entry.getKey().name} ${entry.getKey().surname}</td>
		%{ 
		for(col in tableMonthlyAbsences.columnKeySet()){
		}%
			<td>
			 	<a data-toggle="modal" href="@{YearlyAbsences.showPersonMonthlyAbsences(entry.getKey().id, year, month, col.code)}" data-target="#myModal3">
				<abbr title="${col.code} ${col.description}" class="initialism">${entry.getValue().get(col)}</abbr>
				</a>
			</td>
		%{
		 }
		 }%
	</tr>	
	%{
	}
	}%
</table>
</section>
</div>
</div>

<div id="myModal3" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-body">
    <p></p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
   <!--   <button class="btn btn-primary">Save changes</button>-->
  </div>
</div>


