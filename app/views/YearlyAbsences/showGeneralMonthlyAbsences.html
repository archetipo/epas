#{extends 'main3.html' /}
#{set header:'navbar' /}
#{set title: 'ePAS - Assenze'  /}

<div id="container-fluid-nav-tabs" class="container-fluid">

<ul class="nav nav-tabs">
  <li class="active"><a href="@{YearlyAbsences.showGeneralMonthlyAbsences(year, month)}">Assenze Mensili</a></li>
  <li><a href="@{YearlyAbsences.yearlyAbsences(session.get("personSelected"), year)}">Assenze Annuali</a></li>
  <li><a href="@{Absences.manageAttachmentsPerCode(year, month)}">Gestione Allegati Per Codice</a></li>
  <li><a href="@{Absences.manageAttachmentsPerPerson(session.get("personSelected"), year, month)}">Allegati Per Persona</a></li>
  <li><a href="@{Absences.absenceInPeriod()}">Assenze in periodo</a></li>
</ul>

</div>

<div class="container-fluid">
  
    
      
      <p>  <h3 class="panel-title text-center">Situazione assenze &{'views.tags.display.date.month.' + month} ${year} </h3></p>
      
    
  		  <table class="datatable-test table table-striped table-bordered table-condensed" cellspacing="0" width="100%">
  		    <thead>
				<tr>
					<th>Nome</th>
					
					%{ for(col in tableMonthlyAbsences.columnKeySet()){ }%
				    #{if !col.code.equals("Totale") }
						<th><abbr title="${col.code} ${col.description}" class="initialism">${col.code}</abbr></th>
					#{/if}
					
				    %{ } }%
				    
					<th>Totale<br>giorni</th>
				</tr>
			</thead>
            <tfoot>
            	<tr>
					<th>Nome</th>
					
					%{ for(col in tableMonthlyAbsences.columnKeySet()){ }%
				    #{if !col.code.equals("Totale") }
						<th><abbr title="${col.code} ${col.description}" class="initialism">${col.code}</abbr></th>
					#{/if}
					
				    %{ } }%
				    
					<th>Totale<br>giorni</th>
				</tr>
            </tfoot>
 
            <tbody>
				%{  
				for(entry in tableMonthlyAbsences.rowMap().entrySet()){
				}%
				<tr>
					<td class="warning">${entry.getKey().name} ${entry.getKey().surname}</td>
					%{ 
					for(col in tableMonthlyAbsences.columnKeySet()){
					}%
						<td data-order="${entry.getValue().get(col)}">
						 	<a href="@{YearlyAbsences.showPersonMonthlyAbsences(entry.getKey().id, year, month, col.code)}" data-modal=".my-modal">
						 	${entry.getValue().get(col)}							
							</a>
						</td>
					%{
					 }
					 }%
				</tr>	
				%{
				}
				}%
			</tbody>	
	      </table>

</div>   

#{include '_myModal.html' /}


