#{extends 'main.html' /}
#{set header:'navbar' /} 
#{set title: 'ePAS - Ferie e Permessi' /} 

#{set 'moreStyles'}

<style>
/* allineamento centrato dei th con rowspan e colspan */
#tabella-ferie th {
	vertical-align: inherit;
}
</style>

#{/set}

<div class="container">
  
   #{alert color:'info'}
     <p>Ferie Anno Precedente ${(year -1)}
   #{/alert}
   <table  class="table table-hover table-bordered table-condensed center" datatable width="100%">
	<thead>
		<tr>
		    <th>Nome</th>
		    
		    <!-- 2016 -->
		    <th>Totali</th>
		    <th>Totali New</th>
		    <th>Maturate</th>
		    <th>Maturate New</th>
		    <th>Usate</th>
		    <th>Usate New</th>
		    <th>Inizio</th>
		    <th>Inizio New</th>
		    <th>Fine</th>
		    <th>Fine New</th>
		    *{ <th>2016 Att</th> }*
		    
		</tr>	
	</thead>

	<tbody>
		#{list items:comparedVacationList, as:'comparedVacation'}
		
		#{if comparedVacation.periodsLastYear != null}
		<tr #{if !comparedVacation.epasLastYearEquivalent()} class="bg-danger" #{/if}>

			<td>
			  ${comparedVacation.person.fullname}
			</td>
            
            <!-- 2016 -->
			<td>${comparedVacation.oldLastYearTotal()} (${comparedVacation.oldLastYearPostPartum()})</td>
			<td>${comparedVacation.newLastYearTotal()} (${comparedVacation.newLastYearPostPartum()})</td>
			<td>${comparedVacation.oldLastYearAccrued()}</td>
			<td>${comparedVacation.newLastYearAccrued()}</td>
			
			<td>${comparedVacation.oldLastYearUsed()}</td>
			<td>${comparedVacation.newLastYearUsed()}</td>
			
			<td
			#{if comparedVacation.oldLastYearContractLowerLimit()}><em><strong>${comparedVacation.oldLastYearLowerLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.oldLastYearLowerLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.newLastYearContractLowerLimit()}><em><strong>${comparedVacation.newLastYearLowerLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.newLastYearLowerLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.oldLastYearContractUpperLimit()}><em><strong>${comparedVacation.oldLastYearUpperLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.oldLastYearUpperLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.newLastYearContractUpperLimit()}><em><strong>${comparedVacation.newLastYearUpperLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.newLastYearUpperLimit().format()}#{/else}	
			</td>
			
			
			*{ questo dato andrebbe preso dal cruscotto 2016
            <td>${comparedVacation.attestatiLastYearTotal()}</td>
            }* 			

		</tr>
		#{/if}
		#{/list}

	</tbody>
  </table>
  
  #{alert color:'info'}
    <p>Ferie Anno Corrente ${(year)}
  #{/alert}
  <table  class="table table-hover table-bordered table-condensed center" datatable width="100%">
	<thead>
		<tr>
		    <th>Nome</th>
		    
		    <!-- 2017 -->
		    <th>Totali</th>
		    <th>Totali New</th>
		    <th>Maturate</th>
		    <th>Maturate New</th>
		    <th>Usate</th>
		    <th>Usate New</th>
		    <th>Inizio</th>
		    <th>Inizio New</th>
		    <th>Fine</th>
		    <th>Fine New</th>
		    *{ <th>2017 Att</th> }*
		    
		</tr>	
	</thead>

	<tbody>
		#{list items:comparedVacationList, as:'comparedVacation'}
		
		#{if comparedVacation.periodsCurrentYear != null}
		<tr #{if !comparedVacation.epasCurrentYearEquivalent()} class="bg-danger" #{/if}>

			<td>
			  ${comparedVacation.person.fullname}
			</td>
            
            <!-- 2017 -->
  		    <td>${comparedVacation.oldCurrentYearTotal()} (${comparedVacation.oldCurrentYearPostPartum()})</td>
  		    <td>${comparedVacation.newCurrentYearTotal()} (${comparedVacation.newCurrentYearPostPartum()})</td>
            <td>${comparedVacation.oldCurrentYearAccrued()}</td>
			<td>${comparedVacation.newCurrentYearAccrued()}</td>
			
			<td>${comparedVacation.oldCurrentYearUsed()}</td>
			<td>${comparedVacation.newCurrentYearUsed()}</td>
			
			<td
			#{if comparedVacation.oldCurrentYearContractLowerLimit()}><em><strong>${comparedVacation.oldCurrentYearLowerLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.oldCurrentYearLowerLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.newCurrentYearContractLowerLimit()}><em><strong>${comparedVacation.newCurrentYearLowerLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.newCurrentYearLowerLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.oldCurrentYearContractUpperLimit()}><em><strong>${comparedVacation.oldCurrentYearUpperLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.oldCurrentYearUpperLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.newCurrentYearContractUpperLimit()}><em><strong>${comparedVacation.newCurrentYearUpperLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.newCurrentYearUpperLimit().format()}#{/else}	
			</td>
			
  		    *{ 
  		    <td>${comparedVacation.attestatiCurrentYearTotal()}</td>
  		    }*

		</tr>
		#{/if}
		#{/list}

	</tbody>
  </table>  
  #{alert color:'info'}
    <p>Permessi ${(year)}
  #{/alert}
  <table  class="table table-hover table-bordered table-condensed center" datatable width="100%">
	<thead>
		<tr>
		    <th>Nome</th>
		    
		    <!-- Permessi -->
		    <th>Totali</th>
		    <th>Totali New</th>
		    <th>Maturate</th>
		    <th>Maturate New</th>
		    <th>Usate</th>
		    <th>Usate New</th>
		    <th>Inizio</th>
		    <th>Inizio New</th>
		    <th>Fine</th>
		    <th>Fine New</th>
		    *{ <th>P Att</th> }*
		</tr>	
	</thead>

	<tbody>
		#{list items:comparedVacationList, as:'comparedVacation'}
		
		#{if comparedVacation.periodsPermissions != null}
		<tr #{if !comparedVacation.epasPermissionEquivalent()} class="bg-danger" #{/if}>

			<td>
			  ${comparedVacation.person.fullname}
			</td>
          
            <!-- Permessi -->
			<td>${comparedVacation.oldPermissionTotal()} (${comparedVacation.oldPermissionPostPartum()})</td>
			<td>${comparedVacation.newPermissionTotal()} (${comparedVacation.newPermissionPostPartum()})</td>
			<td>${comparedVacation.oldPermissionAccrued()}</td>
			<td>${comparedVacation.newPermissionAccrued()}</td>
			
			<td>${comparedVacation.oldPermissionUsed()}</td>
			<td>${comparedVacation.newPermissionUsed()}</td>
			
			<td
			#{if comparedVacation.oldPermissionContractLowerLimit()}><em><strong>${comparedVacation.oldPermissionLowerLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.oldPermissionLowerLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.newPermissionContractLowerLimit()}><em><strong>${comparedVacation.newPermissionLowerLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.newPermissionLowerLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.oldPermissionContractUpperLimit()}><em><strong>${comparedVacation.oldPermissionUpperLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.oldPermissionUpperLimit().format()}#{/else}	
			</td>
			<td
			#{if comparedVacation.newPermissionContractUpperLimit()}><em><strong>${comparedVacation.newPermissionUpperLimit().format()}</strong></em>#{/if}
			#{else} class="text-muted">${comparedVacation.newPermissionUpperLimit().format()}#{/else}	
			</td>
			
			*{
			<td>${comparedVacation.attestatiPermissionTotal()}</td>
			}*


		</tr>
		#{/if}
		#{/list}

	</tbody>
  </table>
  
 
</div>
